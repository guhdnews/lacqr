"use strict";exports.id=577,exports.ids=[577],exports.modules={74577:(e,t,s)=>{s.d(t,{Z:()=>z});var a=s(10326),l=s(17577),i=s.n(l),n=s(88378),o=s(63062),r=s(1572),d=s(7937),c=s(94019),x=s(11962),u=s(59593),m=s(687),h=s(32933),p=s(43810);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,s(62881).Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var b=s(90434),f=s(11982),y=s(21769),j=s(8729),v=s(51822),k=s(5186),w=s(48241),N=s(86697),C=s(74846);function z({menu:e,clients:t=[],onShareQuote:s,onQuoteGenerated:z,isAuthenticated:Z=!1,themeColor:S="#ec4899",buttonStyle:$="rounded"}){let[q,T]=(0,l.useState)(null),[_,A]=(0,l.useState)(!1),[R,F]=(0,l.useState)(null),[I,O]=(0,l.useState)(!1),[P,U]=(0,l.useState)(1),[L,B]=(0,l.useState)(!1),[D,G]=(0,l.useState)(!1),[V,E]=(0,l.useState)(""),[H,J]=(0,l.useState)(""),[K,M]=(0,l.useState)(!1),{isCoolingDown:Q,remainingTime:W,startCooldown:X}=(0,k.q)({cooldownTime:1e4,key:"smart_quote_scan"}),Y=i().useRef(null),ee=async t=>{let s=t.target.files?.[0];if(Y.current&&(Y.current.value=""),Q){alert(`Please wait ${W}s before scanning again.`);return}if(s){let t=new FileReader;t.onloadend=()=>T(t.result),t.readAsDataURL(s),A(!0),F(null),O(!1),U(1);try{let t=await (0,y.hv)(s),a=await f.Go.analyzeImage(t);F(a),z&&z(a);let l=(0,N.e_)(a,e),i=`Hey! Thanks for sending the inspo. Based on this design, I'd quote this as a ${a.base.length} ${a.base.shape} ${a.base.system} set with ${a.art.level||"no"} art. The estimated total would be around $${l.total.toFixed(2)}. Let me know if you'd like to book!`;E(i),X()}catch(e){console.error("Analysis failed",e),alert("Analysis failed. Please try again.")}finally{A(!1)}}},et=async()=>{s&&R&&await s(R,H)};return(0,a.jsxs)("div",{className:"space-y-6 max-w-md mx-auto pb-24",children:[(0,a.jsxs)("div",{className:"text-center space-y-2 relative",children:[(0,a.jsxs)("div",{className:"absolute right-0 top-0 flex space-x-2",children:[Z&&a.jsx(b.default,{href:"/dashboard/settings",className:"text-gray-400 hover:text-pink-500 transition-colors",children:a.jsx(n.Z,{size:20})}),a.jsx("button",{onClick:()=>G(!0),className:"text-gray-400 hover:text-pink-500 transition-colors",children:a.jsx(o.Z,{size:20})})]}),a.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Service Sorter"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Upload inspo, get service recommendations."}),Q&&(0,a.jsxs)("p",{className:"text-xs text-amber-600 font-medium animate-pulse",children:["Cooling down... ",W,"s"]})]}),q?(0,a.jsxs)("div",{className:"relative rounded-3xl overflow-hidden shadow-lg bg-black h-80 group",children:[a.jsx("div",{className:"w-full h-full overflow-hidden cursor-zoom-in",onClick:()=>{U(e=>1===e?2.5:1)},children:a.jsx("img",{src:q,alt:"Uploaded",className:`w-full h-full object-contain bg-black transition-all duration-300 ${_?"opacity-50":"opacity-100"}`,style:{transform:`scale(${P})`,transformOrigin:"center"}})}),!_&&a.jsx("button",{onClick:e=>{e.stopPropagation(),B(!0)},className:"absolute top-4 left-4 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 backdrop-blur-sm transition-colors z-10",children:a.jsx(d.Z,{size:20})}),!_&&a.jsx("button",{onClick:()=>{T(null),F(null),A(!1),O(!1),U(1)},className:"absolute top-4 right-4 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 backdrop-blur-sm transition-colors z-10",children:a.jsx(c.Z,{size:20})}),!_&&(0,a.jsxs)("div",{className:"absolute bottom-4 right-4 bg-black/50 text-white px-3 py-1 rounded-full text-xs backdrop-blur-sm pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity flex items-center space-x-1",children:[1===P?a.jsx(d.Z,{size:12}):a.jsx(x.Z,{size:12}),a.jsx("span",{children:1===P?"Tap to Zoom":"Tap to Reset"})]}),a.jsx(j.Z,{isVisible:_,onCancel:()=>{A(!1)}})]}):(0,a.jsxs)("label",{className:`border-2 border-dashed border-gray-300 h-80 flex flex-col items-center justify-center bg-white cursor-pointer hover:bg-pink-50/50 transition-all group relative overflow-hidden ${"pill"===$?"rounded-[2rem]":"square"===$?"rounded-none":"rounded-3xl"}`,style:{borderColor:_?S:void 0},children:[a.jsx("input",{ref:Y,type:"file",accept:"image/*",onChange:ee,className:"hidden"}),a.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",style:{backgroundColor:`${S}15`},children:a.jsx(r.Z,{size:32,style:{color:S}})}),a.jsx("span",{className:"font-medium text-gray-500 transition-colors",style:{color:S},children:"Tap to Analyze Inspo"}),a.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"or upload from gallery"})]}),R&&(0,a.jsxs)("div",{className:"space-y-6 animate-in slide-in-from-bottom-10 fade-in duration-500",children:[R.visual_description&&(0,a.jsxs)("div",{className:"bg-indigo-50 border border-indigo-100 p-4 rounded-xl relative",children:[a.jsx("h4",{className:"text-xs font-bold text-indigo-800 uppercase tracking-wider mb-2",children:"AI Visual Analysis"}),(0,a.jsxs)("p",{className:"text-sm text-indigo-900 italic mb-3",children:['"',R.visual_description,'"']}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>M(!0),className:"p-1.5 rounded-lg hover:bg-indigo-100 text-indigo-400 hover:text-indigo-600 transition-colors",title:"Good analysis",children:a.jsx(u.Z,{size:16})}),a.jsx("button",{onClick:()=>M(!0),className:"p-1.5 rounded-lg hover:bg-indigo-100 text-indigo-400 hover:text-indigo-600 transition-colors",title:"Bad analysis",children:a.jsx(m.Z,{size:16})})]})]}),a.jsx(w.Z,{initialSelection:R,onUpdate:e=>F(e)}),Z&&t.length>0&&(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm",children:[a.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider font-bold mb-2",children:"Link to Client (Optional)"}),(0,a.jsxs)("select",{value:H,onChange:e=>J(e.target.value),className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-100 text-sm font-medium text-charcoal focus:outline-none focus:border-pink-300",children:[a.jsx("option",{value:"",children:"Select a client..."}),t.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider font-bold",children:"Draft Reply"}),a.jsx("span",{className:"text-xs text-pink-500 font-medium",children:"Editable"})]}),a.jsx("textarea",{value:V,onChange:e=>E(e.target.value),className:"w-full bg-gray-50 p-4 rounded-xl text-gray-700 text-sm leading-relaxed border border-gray-100 focus:outline-none focus:border-pink-300 focus:ring-2 focus:ring-pink-100 transition-all min-h-[100px] resize-none"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>{V&&(navigator.clipboard.writeText(V),O(!0),setTimeout(()=>O(!1),2e3))},className:`flex-1 py-4 font-medium transition-all shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center space-x-2 ${I?"text-white":"text-white hover:opacity-90"} ${"pill"===$?"rounded-full":"square"===$?"rounded-none":"rounded-xl"}`,style:{backgroundColor:I?"#22c55e":S},children:I?(0,a.jsxs)(a.Fragment,{children:[a.jsx(h.Z,{size:20}),a.jsx("span",{children:"Copied!"})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(p.Z,{size:20}),a.jsx("span",{children:"Copy Text"})]})}),Z&&a.jsx("button",{onClick:et,className:`p-4 font-bold text-gray-500 shadow-lg transition-all flex items-center justify-center bg-white hover:text-pink-500 ${"pill"===$?"rounded-full":"square"===$?"rounded-none":"rounded-xl"}`,children:a.jsx(g,{size:20})})]})]}),L&&q&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:()=>B(!1),children:[a.jsx("button",{onClick:()=>B(!1),className:"absolute top-4 right-4 text-white hover:text-gray-300",children:a.jsx(c.Z,{size:32})}),a.jsx("img",{src:q,alt:"Full size",className:"max-w-full max-h-full object-contain rounded-lg",onClick:e=>e.stopPropagation()})]}),a.jsx(v.Z,{isOpen:D,onClose:()=>G(!1),context:"smart_quote"}),a.jsx(C.Z,{isOpen:K,onClose:()=>M(!1),context:"smart_quote",aiResult:R})]})}}};