"use strict";exports.id=839,exports.ids=[839],exports.modules={74846:(e,s,t)=>{t.d(s,{Z:()=>m});var i=t(10326),r=t(17577),l=t(94019),a=t(69436),n=t(59593),c=t(687),o=t(76),d=t(90445),u=t(58729);function m({isOpen:e,onClose:s,context:t,resultId:m,aiResult:h}){let{user:g}=(0,u.q)(),[x,p]=(0,r.useState)(null),[f,b]=(0,r.useState)(""),[y,j]=(0,r.useState)(!1),[v,N]=(0,r.useState)(!1);if(!e)return null;let w=async()=>{if(x||f){j(!0);try{await (0,o.addDoc)((0,o.collection)(d.db,"feedback"),{userId:g?.id||"anonymous",userName:g?.name||"Anonymous",context:t,rating:x,comment:f,resultId:m||null,aiResult:h||null,createdAt:new Date,userAgent:navigator.userAgent}),N(!0),setTimeout(()=>{s(),N(!1),p(null),b("")},2e3)}catch(e){console.error("Error submitting feedback:",e),alert("Failed to submit feedback. Please try again.")}finally{j(!1)}}};return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[(0,i.jsxs)("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[i.jsx("h3",{className:"font-bold text-gray-800",children:"Give Feedback"}),i.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:i.jsx(l.Z,{size:20})})]}),i.jsx("div",{className:"p-6 space-y-6",children:v?(0,i.jsxs)("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(a.Z,{size:32})}),i.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-2",children:"Thank You!"}),i.jsx("p",{className:"text-gray-500",children:"Your feedback helps us improve."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("p",{className:"text-gray-600 mb-4 font-medium",children:"How was the AI analysis?"}),(0,i.jsxs)("div",{className:"flex justify-center gap-6",children:[i.jsx("button",{onClick:()=>p("positive"),className:`p-4 rounded-2xl transition-all ${"positive"===x?"bg-green-100 text-green-600 ring-2 ring-green-500":"bg-gray-50 text-gray-400 hover:bg-gray-100"}`,children:i.jsx(n.Z,{size:32})}),i.jsx("button",{onClick:()=>p("negative"),className:`p-4 rounded-2xl transition-all ${"negative"===x?"bg-red-100 text-red-600 ring-2 ring-red-500":"bg-gray-50 text-gray-400 hover:bg-gray-100"}`,children:i.jsx(c.Z,{size:32})})]})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Comments (Optional)"}),i.jsx("textarea",{value:f,onChange:e=>b(e.target.value),placeholder:"Tell us what went wrong or what you liked...",className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 focus:ring-2 focus:ring-pink-500 focus:outline-none min-h-[100px] resize-none"})]}),i.jsx("button",{onClick:w,disabled:y||!x&&!f,className:"w-full py-3 bg-charcoal text-white rounded-xl font-bold hover:bg-black transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:y?"Sending...":"Submit Feedback"})]})})]})})}},51822:(e,s,t)=>{t.d(s,{Z:()=>o});var i=t(10326),r=t(94019),l=t(63062),a=t(51896),n=t(85206),c=t(71821);function o({isOpen:e,onClose:s,context:t="lacqr_lens"}){if(!e)return null;let o="smart_quote"===t;return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl max-w-md w-full p-6 shadow-2xl relative animate-in zoom-in-95 duration-200",children:[i.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:i.jsx(r.Z,{size:24})}),(0,i.jsxs)("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-12 h-12 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(l.Z,{size:24,className:"text-pink-500"})}),i.jsx("h3",{className:"text-xl font-bold text-charcoal",children:o?"How to use Service Sorter":"How to use Lacqr Lens"}),i.jsx("p",{className:"text-sm text-gray-500",children:o?"Get service recommendations instantly":"Get accurate quotes in seconds"})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"bg-gray-50 p-2 rounded-lg",children:i.jsx(a.Z,{size:20,className:"text-charcoal"})}),(0,i.jsxs)("div",{children:[i.jsx("h4",{className:"font-bold text-sm text-charcoal",children:"1. Snap or Upload"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Take a clear photo of the nail design or upload one from your gallery. Ensure good lighting for best results."})]})]}),(0,i.jsxs)("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"bg-gray-50 p-2 rounded-lg",children:i.jsx(n.Z,{size:20,className:"text-charcoal"})}),(0,i.jsxs)("div",{children:[i.jsx("h4",{className:"font-bold text-sm text-charcoal",children:"2. AI Analysis"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o?"Our AI analyzes the design to recommend the best services from the menu.":"Our AI detects shape, length, and designs. You can manually adjust any details."})]})]}),(0,i.jsxs)("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"bg-gray-50 p-2 rounded-lg",children:i.jsx(c.Z,{size:20,className:"text-charcoal"})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h4",{className:"font-bold text-sm text-charcoal",children:["3. ",o?"Book It":"Quote & Receipt"]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o?"Copy the generated booking text to send to your nail tech.":'See the estimated total instantly. Switch to "Receipt" mode to download a professional breakdown.'})]})]})]}),i.jsx("button",{onClick:s,className:"w-full mt-8 bg-charcoal text-white font-bold py-3 rounded-xl hover:bg-black transition-colors",children:"Got it!"})]})})}},8729:(e,s,t)=>{t.d(s,{Z:()=>g});var i=t(10326),r=t(17577),l=t(85199),a=t(20968),n=t(1572),c=t(66307),o=t(88307),d=t(66697),u=t(87815);let m=[{icon:l.Z,text:"Scanning nail geometry...",color:"text-blue-500"},{icon:a.Z,text:"Analyzing art complexity...",color:"text-purple-500"},{icon:n.Z,text:"Identifying add-ons...",color:"text-yellow-500"},{icon:c.Z,text:"Calculating estimate...",color:"text-green-500"}],h=[{icon:l.Z,text:"Scanning hand structure...",color:"text-blue-500"},{icon:o.Z,text:"Detecting growth & lifting...",color:"text-purple-500"},{icon:d.Z,text:"Analyzing skin health...",color:"text-yellow-500"},{icon:u.Z,text:"Generating treatment plan...",color:"text-green-500"}];function g({isScanning:e,mode:s="design",onCancel:t}){let[l,a]=(0,r.useState)(0),[o,u]=(0,r.useState)(!1);return e?i.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm rounded-3xl p-4",children:(0,i.jsxs)("div",{className:"w-full max-w-sm text-center space-y-8",children:[(0,i.jsxs)("div",{className:"relative mx-auto w-24 h-24",children:[i.jsx("div",{className:"absolute inset-0 border-4 border-gray-700 rounded-full"}),i.jsx("div",{className:"absolute inset-0 border-4 border-pink-500 border-t-transparent rounded-full animate-spin"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:"diagnostics"===s?i.jsx(d.Z,{className:"text-pink-500 animate-pulse",size:32}):i.jsx(n.Z,{className:"text-pink-500 animate-pulse",size:32})})]}),i.jsx("div",{className:"space-y-4 px-4",children:("diagnostics"===s?h:m).map((e,s)=>{let t=e.icon,r=s===l,a=s<l;return(0,i.jsxs)("div",{className:`flex items-center space-x-3 transition-all duration-500 ${r||a?"opacity-100 transform translate-x-0":"opacity-30 transform -translate-x-2"}`,children:[i.jsx("div",{className:`
                                    w-8 h-8 rounded-full flex items-center justify-center transition-colors
                                    ${r?"bg-pink-500/20 "+e.color:""}
                                    ${a?"bg-green-500/20 text-green-400":""}
                                    ${r||a?"":"bg-gray-800 text-gray-500"}
                                `,children:a?i.jsx(c.Z,{size:16}):i.jsx(t,{size:16})}),i.jsx("span",{className:`text-sm font-medium ${r?"text-white":"text-gray-400"}`,children:e.text})]},s)})}),t&&i.jsx("button",{onClick:t,className:"mt-8 px-6 py-2 rounded-full border border-gray-600 text-gray-300 text-sm hover:bg-gray-800 hover:text-white transition-colors",children:"Cancel Scan"}),o&&i.jsx("p",{className:"text-xs text-amber-400 animate-in fade-in slide-in-from-bottom-2 duration-1000 mt-4 max-w-[200px] mx-auto",children:"First scans take a little longer... hang tight! â³"}),i.jsx("p",{className:"text-xs text-gray-500 animate-pulse mt-4",children:"Powered by Lacqr AI"})]})}):null}},48241:(e,s,t)=>{t.d(s,{Z:()=>u});var i=t(10326),r=t(17577),l=t(35047),a=t(60840);t(86697);var n=t(48998),c=t(41291),o=t(96633),d=t(941);function u({initialSelection:e,onUpdate:s}){let{menu:t}=(0,a.H)(),u=(0,l.useSearchParams)(),[m,h]=(0,r.useState)(e),[g,x]=(0,r.useState)(0),[p,f]=(0,r.useState)(0),[b,y]=(0,r.useState)(!1),j=(e,s)=>{h(t=>({...t,base:{...t.base,[e]:s}}))},v=(e,s)=>{h(t=>({...t,addons:{...t.addons,[e]:s}}))},N=e=>{h(s=>({...s,art:{...s.art,level:e}}))},w=(e,s)=>{h(t=>({...t,bling:{...t.bling,[e]:s}}))},k=(e,s)=>{h(t=>({...t,modifiers:{...t.modifiers,[e]:s}}))},C=(e,s)=>{h(t=>({...t,pedicure:{...t.pedicure,[e]:s}}))};return(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,i.jsxs)("div",{className:"bg-charcoal text-white p-6 flex justify-between items-center sticky top-0 z-10",children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"text-xl font-bold font-display",children:"Service Configuration"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Customize your set details"})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsxs)("div",{className:"text-3xl font-bold font-display flex items-center justify-end",children:[i.jsx("span",{className:"text-gray-400 text-lg mr-1",children:"$"}),g.toFixed(2)]}),(0,i.jsxs)("div",{className:"flex items-center justify-end text-gray-400 text-xs uppercase tracking-wider mt-1",children:[i.jsx(n.Z,{className:"w-3 h-3 mr-1"}),Math.floor(p/60),"h ",p%60,"m"]})]})]}),(0,i.jsxs)("div",{className:"p-6 space-y-8",children:[m.pricingDetails&&(0,i.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100 mb-6",children:[i.jsx("h4",{className:"font-bold text-gray-900 text-sm uppercase tracking-wide mb-3",children:"Price Breakdown"}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Base Set"}),(0,i.jsxs)("span",{className:"font-medium",children:["$",m.pricingDetails.breakdown.basePrice]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("span",{className:"text-gray-600",children:["Length (",m.base.length,")"]}),(0,i.jsxs)("span",{className:"font-medium",children:["+$",m.pricingDetails.breakdown.lengthCharge]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("span",{className:"text-gray-600",children:["Art (",m.art.level||"None",")"]}),(0,i.jsxs)("span",{className:"font-medium",children:["+$",m.pricingDetails.breakdown.artTierCharge]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("span",{className:"text-gray-600",children:["Bling (",m.bling.density,")"]}),(0,i.jsxs)("span",{className:"font-medium",children:["+$",m.pricingDetails.breakdown.densityCharge]})]}),m.pricingDetails.breakdown.materialCharge>0&&(0,i.jsxs)("div",{className:"flex justify-between text-purple-600",children:[i.jsx("span",{children:"Premium Materials"}),(0,i.jsxs)("span",{className:"font-medium",children:["+$",m.pricingDetails.breakdown.materialCharge]})]}),m.pricingDetails.breakdown.complexitySurcharge>0&&(0,i.jsxs)("div",{className:"flex justify-between text-red-600 font-medium",children:[i.jsx("span",{children:"Complexity / Time Surcharge"}),(0,i.jsxs)("span",{children:["+$",m.pricingDetails.breakdown.complexitySurcharge.toFixed(2)]})]}),(0,i.jsxs)("div",{className:"pt-2 mt-2 border-t border-gray-200 flex justify-between font-bold",children:[i.jsx("span",{children:"Total Estimate"}),(0,i.jsxs)("span",{children:["$",m.pricingDetails.totalPrice]})]})]})]}),(0,i.jsxs)("section",{className:"bg-pink-50 rounded-2xl p-6 border border-pink-100",children:[(0,i.jsxs)("h3",{className:"text-sm font-bold text-gray-800 uppercase tracking-wider mb-4 flex items-center",children:[i.jsx("span",{className:"mr-2",children:"\uD83D\uDC85"})," Canvas"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Foundation"}),i.jsx("select",{value:m.base.system,onChange:e=>j("system",e.target.value),className:"w-full p-3 bg-white rounded-xl border border-pink-100 focus:ring-2 focus:ring-pink-500",children:Object.keys(t.basePrices).map(e=>(0,i.jsxs)("option",{value:e,children:[e," ($",t.basePrices[e],")"]},e))})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shape"}),i.jsx("select",{value:m.base.shape,onChange:e=>j("shape",e.target.value),className:"w-full p-3 bg-white rounded-xl border border-pink-100 focus:ring-2 focus:ring-pink-500",children:Object.keys(t.shapeSurcharges).map(e=>(0,i.jsxs)("option",{value:e,children:[e," (+$",t.shapeSurcharges[e],")"]},e))})]}),(0,i.jsxs)("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Length"}),i.jsx("select",{value:m.base.length,onChange:e=>j("length",e.target.value),className:"w-full p-3 bg-white rounded-xl border border-pink-100 focus:ring-2 focus:ring-pink-500",children:Object.keys(t.lengthSurcharges).map(e=>(0,i.jsxs)("option",{value:e,children:[e," (+$",t.lengthSurcharges[e],")"]},e))})]})]})]}),(0,i.jsxs)("section",{className:"bg-blue-50 rounded-2xl p-6 border border-blue-100",children:[(0,i.jsxs)("h3",{className:"text-sm font-bold text-gray-800 uppercase tracking-wider mb-4 flex items-center",children:[i.jsx("span",{className:"mr-2",children:"\uD83C\uDFA8"})," Design"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Complexity"}),(0,i.jsxs)("select",{value:m.art.level||"None",onChange:e=>N("None"===e.target.value?null:e.target.value),className:"w-full p-3 bg-white rounded-xl border border-blue-100 focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"None",children:"None"}),Object.keys(t.artLevelPrices).map(e=>(0,i.jsxs)("option",{value:e,children:[e," (+$",t.artLevelPrices[e],")"]},e))]})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Finish"}),i.jsx("select",{value:m.addons.finish,onChange:e=>v("finish",e.target.value),className:"w-full p-3 bg-white rounded-xl border border-blue-100 focus:ring-2 focus:ring-blue-500",children:Object.keys(t.finishSurcharges).map(e=>(0,i.jsxs)("option",{value:e,children:[e," (+$",t.finishSurcharges[e],")"]},e))})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Specialty Effect"}),i.jsx("select",{value:m.addons.specialtyEffect,onChange:e=>v("specialtyEffect",e.target.value),className:"w-full p-3 bg-white rounded-xl border border-blue-100 focus:ring-2 focus:ring-blue-500",children:Object.keys(t.specialtySurcharges).map(e=>(0,i.jsxs)("option",{value:e,children:[e," (+$",t.specialtySurcharges[e],")"]},e))})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Classic Design"}),i.jsx("select",{value:m.addons.classicDesign,onChange:e=>v("classicDesign",e.target.value),className:"w-full p-3 bg-white rounded-xl border border-blue-100 focus:ring-2 focus:ring-blue-500",children:Object.keys(t.classicDesignSurcharges).map(e=>(0,i.jsxs)("option",{value:e,children:[e," (+$",t.classicDesignSurcharges[e],")"]},e))})]})]})]}),(0,i.jsxs)("section",{className:"bg-yellow-50 rounded-2xl p-6 border border-yellow-100",children:[(0,i.jsxs)("h3",{className:"text-sm font-bold text-gray-800 uppercase tracking-wider mb-4 flex items-center",children:[i.jsx("span",{className:"mr-2",children:"\uD83D\uDC8E"})," Inventory"]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl border border-yellow-100",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Gems (Density)"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{let e=Object.keys(t.blingDensityPrices),s=e.indexOf(m.bling.density);w("density",e[Math.max(0,s-1)])},className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center hover:bg-yellow-200 text-yellow-700",children:"-"}),i.jsx("span",{className:"font-bold w-24 text-center text-sm",children:m.bling.density}),i.jsx("button",{onClick:()=>{let e=Object.keys(t.blingDensityPrices),s=e.indexOf(m.bling.density),i=Math.min(e.length-1,s+1);w("density",e[i])},className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center hover:bg-yellow-200 text-yellow-700",children:"+"})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl border border-yellow-100",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Charms"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>w("xlCharmsCount",Math.max(0,m.bling.xlCharmsCount-1)),className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center hover:bg-yellow-200 text-yellow-700",children:"-"}),i.jsx("span",{className:"font-bold w-8 text-center",children:m.bling.xlCharmsCount}),i.jsx("button",{onClick:()=>w("xlCharmsCount",m.bling.xlCharmsCount+1),className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center hover:bg-yellow-200 text-yellow-700",children:"+"})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl border border-yellow-100",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Piercings"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>w("piercingsCount",Math.max(0,m.bling.piercingsCount-1)),className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center hover:bg-yellow-200 text-yellow-700",children:"-"}),i.jsx("span",{className:"font-bold w-8 text-center",children:m.bling.piercingsCount}),i.jsx("button",{onClick:()=>w("piercingsCount",m.bling.piercingsCount+1),className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center hover:bg-yellow-200 text-yellow-700",children:"+"})]})]})]})]}),(0,i.jsxs)("section",{className:"bg-gray-50 rounded-2xl p-6 border border-gray-100",children:[i.jsx("h3",{className:"text-sm font-bold text-gray-800 uppercase tracking-wider mb-4",children:"Appointment Details"}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requested Time"}),i.jsx("input",{type:"datetime-local",value:m.appointmentTime||"",onChange:e=>h(s=>({...s,appointmentTime:e.target.value})),className:"w-full p-3 bg-white rounded-xl border border-gray-200 focus:ring-2 focus:ring-gray-500"})]})]}),i.jsx("hr",{className:"border-gray-100"}),(0,i.jsxs)("section",{children:[(0,i.jsxs)("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4 flex items-center",children:[i.jsx(c.Z,{size:16,className:"mr-2 text-orange-500"}),"Modifiers"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Foreign Work"}),i.jsx("select",{value:m.modifiers.foreignWork,onChange:e=>k("foreignWork",e.target.value),className:"w-full p-3 bg-gray-50 rounded-xl border-none focus:ring-2 focus:ring-orange-500",children:Object.keys(t.modifierSurcharges).map(e=>(0,i.jsxs)("option",{value:e,children:[e," (+$",t.modifierSurcharges[e],")"]},e))})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Repairs (Qty)"}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{onClick:()=>k("repairsCount",Math.max(0,m.modifiers.repairsCount-1)),className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200",children:"-"}),i.jsx("span",{className:"font-bold w-8 text-center",children:m.modifiers.repairsCount}),i.jsx("button",{onClick:()=>k("repairsCount",m.modifiers.repairsCount+1),className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200",children:"+"}),(0,i.jsxs)("span",{className:"text-xs text-gray-400",children:["($",t.unitPrices.repairs,"/nail)"]})]})]})]}),i.jsx("div",{className:"mt-4",children:(0,i.jsxs)("label",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors",children:[i.jsx("input",{type:"checkbox",checked:m.modifiers.soakOffOnly,onChange:e=>k("soakOffOnly",e.target.checked),className:"w-5 h-5 text-pink-500 rounded focus:ring-pink-500 border-gray-300"}),(0,i.jsxs)("span",{className:"font-medium text-gray-700",children:["Soak Off Only (No Service) (+$",t.unitPrices.soakOff,")"]})]})})]}),i.jsx("hr",{className:"border-gray-100"}),(0,i.jsxs)("section",{children:[i.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Pedicure"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Type"}),i.jsx("select",{value:m.pedicure.type,onChange:e=>C("type",e.target.value),className:"w-full p-3 bg-gray-50 rounded-xl border-none focus:ring-2 focus:ring-blue-500",children:Object.keys(t.pedicurePrices).map(e=>(0,i.jsxs)("option",{value:e,children:[e," (+$",t.pedicurePrices[e],")"]},e))})]}),"None"!==m.pedicure.type&&i.jsx("div",{className:"flex items-center",children:(0,i.jsxs)("label",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-xl cursor-pointer hover:bg-blue-100 transition-colors w-full",children:[i.jsx("input",{type:"checkbox",checked:m.pedicure.toeArtMatch,onChange:e=>C("toeArtMatch",e.target.checked),className:"w-5 h-5 text-blue-500 rounded focus:ring-blue-500 border-gray-300"}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"font-medium text-blue-900 block",children:"Match Hand Art?"}),i.jsx("span",{className:"text-xs text-blue-700",children:"Adds 50% of Hand Art Price"})]})]})})]})]}),"true"===u.get("debug")&&(0,i.jsxs)("div",{className:"border-t border-gray-100 pt-6",children:[(0,i.jsxs)("button",{onClick:()=>y(!b),className:"flex items-center text-xs text-gray-400 hover:text-gray-600 transition-colors",children:[b?i.jsx(o.Z,{className:"w-3 h-3 mr-1"}):i.jsx(d.Z,{className:"w-3 h-3 mr-1"}),b?"Hide AI Inspector":"Show AI Inspector (Debug)"]}),b&&(0,i.jsxs)("div",{className:"mt-4 p-4 bg-gray-900 rounded-xl text-xs font-mono text-green-400 overflow-x-auto",children:[i.jsx("h4",{className:"font-bold text-gray-500 mb-2 uppercase tracking-wider",children:"Raw Analysis Data"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-500 block mb-1",children:"Reasoning:"}),i.jsx("p",{className:"text-white",children:m.reasoning})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-500 block mb-1",children:"Confidence:"}),(0,i.jsxs)("p",{className:"text-white",children:[m.confidence?(100*m.confidence).toFixed(1):0,"%"]})]})]})]})]}),(0,i.jsxs)("section",{className:"bg-yellow-50 rounded-2xl p-6 border border-yellow-100",children:[(0,i.jsxs)("h3",{className:"text-sm font-bold text-gray-800 uppercase tracking-wider mb-4 flex items-center",children:[i.jsx("span",{className:"mr-2",children:"\uD83D\uDC8E"})," Inventory"]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl border border-yellow-100",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Gems (Density)"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{let e=Object.keys(t.blingDensityPrices),s=e.indexOf(m.bling.density);w("density",e[Math.max(0,s-1)])},className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center hover:bg-yellow-200 text-yellow-700",children:"-"}),i.jsx("span",{className:"font-bold w-24 text-center text-sm",children:m.bling.density}),i.jsx("button",{onClick:()=>{let e=Object.keys(t.blingDensityPrices),s=e.indexOf(m.bling.density),i=Math.min(e.length-1,s+1);w("density",e[i])},className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center hover:bg-yellow-200 text-yellow-700",children:"+"})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl border border-yellow-100",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Charms"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>w("xlCharmsCount",Math.max(0,m.bling.xlCharmsCount-1)),className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center hover:bg-yellow-200 text-yellow-700",children:"-"}),i.jsx("span",{className:"font-bold w-8 text-center",children:m.bling.xlCharmsCount}),i.jsx("button",{onClick:()=>w("xlCharmsCount",m.bling.xlCharmsCount+1),className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center hover:bg-yellow-200 text-yellow-700",children:"+"})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl border border-yellow-100",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Piercings"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>w("piercingsCount",Math.max(0,m.bling.piercingsCount-1)),className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center hover:bg-yellow-200 text-yellow-700",children:"-"}),i.jsx("span",{className:"font-bold w-8 text-center",children:m.bling.piercingsCount}),i.jsx("button",{onClick:()=>w("piercingsCount",m.bling.piercingsCount+1),className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center hover:bg-yellow-200 text-yellow-700",children:"+"})]})]})]})]}),(0,i.jsxs)("section",{className:"bg-gray-50 rounded-2xl p-6 border border-gray-100",children:[i.jsx("h3",{className:"text-sm font-bold text-gray-800 uppercase tracking-wider mb-4",children:"Appointment Details"}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requested Time"}),i.jsx("input",{type:"datetime-local",value:m.appointmentTime||"",onChange:e=>h(s=>({...s,appointmentTime:e.target.value})),className:"w-full p-3 bg-white rounded-xl border border-gray-200 focus:ring-2 focus:ring-gray-500"})]})]}),i.jsx("hr",{className:"border-gray-100"}),(0,i.jsxs)("section",{children:[(0,i.jsxs)("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4 flex items-center",children:[i.jsx(c.Z,{size:16,className:"mr-2 text-orange-500"}),"Modifiers"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Foreign Work"}),i.jsx("select",{value:m.modifiers.foreignWork,onChange:e=>k("foreignWork",e.target.value),className:"w-full p-3 bg-gray-50 rounded-xl border-none focus:ring-2 focus:ring-orange-500",children:Object.keys(t.modifierSurcharges).map(e=>(0,i.jsxs)("option",{value:e,children:[e," (+$",t.modifierSurcharges[e],")"]},e))})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Repairs (Qty)"}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{onClick:()=>k("repairsCount",Math.max(0,m.modifiers.repairsCount-1)),className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200",children:"-"}),i.jsx("span",{className:"font-bold w-8 text-center",children:m.modifiers.repairsCount}),i.jsx("button",{onClick:()=>k("repairsCount",m.modifiers.repairsCount+1),className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200",children:"+"}),(0,i.jsxs)("span",{className:"text-xs text-gray-400",children:["($",t.unitPrices.repairs,"/nail)"]})]})]})]}),i.jsx("div",{className:"mt-4",children:(0,i.jsxs)("label",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors",children:[i.jsx("input",{type:"checkbox",checked:m.modifiers.soakOffOnly,onChange:e=>k("soakOffOnly",e.target.checked),className:"w-5 h-5 text-pink-500 rounded focus:ring-pink-500 border-gray-300"}),(0,i.jsxs)("span",{className:"font-medium text-gray-700",children:["Soak Off Only (No Service) (+$",t.unitPrices.soakOff,")"]})]})})]}),i.jsx("hr",{className:"border-gray-100"}),(0,i.jsxs)("section",{children:[i.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Pedicure"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Type"}),i.jsx("select",{value:m.pedicure.type,onChange:e=>C("type",e.target.value),className:"w-full p-3 bg-gray-50 rounded-xl border-none focus:ring-2 focus:ring-blue-500",children:Object.keys(t.pedicurePrices).map(e=>(0,i.jsxs)("option",{value:e,children:[e," (+$",t.pedicurePrices[e],")"]},e))})]}),"None"!==m.pedicure.type&&i.jsx("div",{className:"flex items-center",children:(0,i.jsxs)("label",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-xl cursor-pointer hover:bg-blue-100 transition-colors w-full",children:[i.jsx("input",{type:"checkbox",checked:m.pedicure.toeArtMatch,onChange:e=>C("toeArtMatch",e.target.checked),className:"w-5 h-5 text-blue-500 rounded focus:ring-blue-500 border-gray-300"}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"font-medium text-blue-900 block",children:"Match Hand Art?"}),i.jsx("span",{className:"text-xs text-blue-700",children:"Adds 50% of Hand Art Price"})]})]})})]})]}),"true"===u.get("debug")&&(0,i.jsxs)("div",{className:"border-t border-gray-100 pt-6",children:[(0,i.jsxs)("button",{onClick:()=>y(!b),className:"flex items-center text-xs text-gray-400 hover:text-gray-600 transition-colors",children:[b?i.jsx(o.Z,{className:"w-3 h-3 mr-1"}):i.jsx(d.Z,{className:"w-3 h-3 mr-1"}),b?"Hide AI Inspector":"Show AI Inspector (Debug)"]}),b&&(0,i.jsxs)("div",{className:"mt-4 p-4 bg-gray-900 rounded-xl text-xs font-mono text-green-400 overflow-x-auto",children:[i.jsx("h4",{className:"font-bold text-gray-500 mb-2 uppercase tracking-wider",children:"Raw Analysis Data"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-500 block mb-1",children:"Reasoning:"}),i.jsx("div",{className:"text-white space-y-1",children:m.reasoning?.split("\n").map((e,s)=>i.jsx("p",{className:"text-xs",children:e},s))})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-500 block mb-1",children:"Confidence:"}),(0,i.jsxs)("p",{className:"text-white",children:[m.confidence?(100*m.confidence).toFixed(1):0,"%"]})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-500 block mb-1",children:"Modal Result (YOLO/Florence):"}),i.jsx("pre",{className:"bg-black p-2 rounded border border-gray-800",children:JSON.stringify(m.modalResult,null,2)})]})]})]})]})]})]})}},5186:(e,s,t)=>{t.d(s,{q:()=>r});var i=t(17577);let r=({cooldownTime:e=6e4,key:s}={})=>{let[t,r]=(0,i.useState)(!1),[l,a]=(0,i.useState)(0);return(0,i.useEffect)(()=>{if(s){let e=localStorage.getItem(`cooldown_${s}`);if(e){let t=parseInt(e,10),i=Date.now();t>i?(r(!0),a(Math.ceil((t-i)/1e3))):localStorage.removeItem(`cooldown_${s}`)}}},[s]),(0,i.useEffect)(()=>{let e;return t&&(e=setInterval(()=>{a(e=>e<=1?(r(!1),s&&localStorage.removeItem(`cooldown_${s}`),0):e-1)},1e3)),()=>clearInterval(e)},[t,s]),{isCoolingDown:t,remainingTime:l,startCooldown:(0,i.useCallback)(()=>{if(r(!0),a(Math.ceil(e/1e3)),s){let t=Date.now()+e;localStorage.setItem(`cooldown_${s}`,t.toString())}},[e,s])}}},11982:(e,s,t)=>{t.d(s,{Go:()=>d});var i=t(11552),r=t(90445),l=t(86697),a=t(9791);function n(e,s,t,i){let r,l="Short";if(t?.estimated_length){let e=t.estimated_length.toLowerCase();e.includes("xxl")||e.includes("extendo")?l="XXL":e.includes("xl")||e.includes("extra")?l="XL":e.includes("long")?l="Long":e.includes("medium")?l="Medium":(e.includes("short")||e.includes("sport")||e.includes("active"))&&(l="Short")}else if(s&&4===s.length){let[e,t,i,r]=s,a=(r-t)/(i-e);l=a<1.1?"Short":a<1.5?"Medium":a<2?"Long":a<2.5?"XL":"XXL"}let a="Coffin";if(t?.shape){let e=t.shape.toLowerCase();e.includes("lipstick")?a="Lipstick":e.includes("duck")||e.includes("flare")||e.includes("fan")||e.includes("triangle")?a="Duck":e.includes("coffin")||e.includes("tapered square")?a="Coffin":e.includes("stiletto")||e.includes("pointed")||e.includes("sharp")?a="Stiletto":e.includes("ballerina")?a="Ballerina":e.includes("almond")?a="Almond":e.includes("squoval")||e.includes("square")&&e.includes("round")?a="Squoval":e.includes("square")&&(a="Square"),t.reasoning_steps?.some(e=>e.toLowerCase().includes("flare")||e.toLowerCase().includes("wider than cuticle")||e.toLowerCase().includes("wider at the tip")||e.toLowerCase().includes("fan out")||e.toLowerCase().includes("triangle shape"))&&(a="Duck")}else if(i?.dense){let e=i.dense.toLowerCase();e.includes("lipstick")?a="Lipstick":e.includes("duck")?a="Duck":e.includes("stiletto")||e.includes("pointed")?a="Stiletto":e.includes("ballerina")?a="Ballerina":e.includes("almond")?a="Almond":e.includes("square")&&(a="Square")}let n="Acrylic";if(t?.system){let e=t.system.toLowerCase();e.includes("soft")||e.includes("x")||e.includes("gel-x")?n="Gel-X":e.includes("gel")&&!e.includes("polish")?n="Hard Gel":e.includes("acrylic")&&(n="Acrylic")}let c="Glossy",o="None",d="None",u=((t?.art_notes||"")+" "+(i?.dense||"")+" "+(t?.vibe||"")).toLowerCase();(u.includes("matte")||u.includes("velvet")||u.includes("frosted")||u.includes("no shine")||u.includes("dull"))&&(c="Matte"),u.includes("cat eye")||u.includes("magnetic")||u.includes("velvet effect")?o="Cat Eye":u.includes("holo")||u.includes("holographic")||u.includes("rainbow")?o="Holo":(u.includes("chrome")||u.includes("metallic")||u.includes("mirror"))&&(o="Chrome"),u.includes("ombre")||u.includes("gradient")||u.includes("fading")?d="Ombre":(u.includes("french tip")||u.includes("french")&&!u.includes("solid"))&&(d="French Tip"),0===(r=0+e.filter(e=>["charm","bow","flower","butterfly","heart","cross"].includes(e.label)).length)&&(u.includes("3d")||u.includes("charm")||u.includes("bow")||u.includes("large gem"))&&(u.includes("each nail")||u.includes("every nail")||u.includes("all nails")?r=10:(u.includes("ring finger")||u.includes("accent nail")||u.includes("two nails"),r=2));let m="None",h=0,g=s?(s[2]-s[0])*(s[3]-s[1]):1e5,x=e.filter(e=>["gem","stone","pearl"].includes(e.label)&&!["charm","bow","flower","butterfly","heart","cross"].includes(e.label));x.forEach(e=>{let s=e.box[2]-e.box[0],t=e.box[3]-e.box[1];h+=s*t});let p=h/g*100;m=0===x.length?u.includes("rhinestone")||u.includes("gem")||u.includes("crystal")||u.includes("charm")||u.includes("bling")?u.includes("heavy")||u.includes("covered")||u.includes("large")||u.includes("cluster")?"Heavy":"Moderate":"None":p<5?"Minimal":p<20?"Moderate":"Heavy";let f=null,b=new Set(e.map(e=>e.label)),y=x.length+r;b.has("encapsulated")||y>10?f="Level 4":b.has("3d_art")||y>5||b.has("hand_painted")?f="Level 3":b.has("french")||b.has("ombre")||y>2?f="Level 2":(y>0||b.has("sticker"))&&(f="Level 1");let j=null;if(u.includes("intricate")&&(u.includes("pattern")||u.includes("detailed")||u.includes("character")||u.includes("portrait"))?j="Level 4":u.includes("complex")||u.includes("3d")||u.includes("encapsulated")||u.includes("airbrush")||u.includes("blooming")||u.includes("detailed")?j="Level 3":u.includes("french")||u.includes("ombre")||u.includes("chrome")||u.includes("cat eye")||u.includes("glitter")||u.includes("sparkle")||u.includes("decorated")||u.includes("design")||u.includes("swirls")||u.includes("checkered")?j="Level 2":(u.includes("simple")||u.includes("sticker")||u.includes("minimal"))&&(j="Level 1"),j){let e=[null,"Level 1","Level 2","Level 3","Level 4"],s=e.indexOf(f);e.indexOf(j)>s&&(f=j)}let v="None";(u.includes("toe")||u.includes("feet")||u.includes("pedicure")||u.includes("sandal"))&&(v=f||"None"!==m?"Gel":"Classic");let N="None",w=0,k=[],C=!1;if(t){if(t.foreign_work){let e=t.foreign_work.toLowerCase();e.includes("removal")?N="Foreign Removal":e.includes("fill")&&(N="Foreign Fill")}t.repairs_needed&&t.repairs_needed>0&&(w=t.repairs_needed),t.growth_weeks&&t.growth_weeks>=2&&(C=!0),t.recommended_services&&t.recommended_services.forEach(e=>{(e.includes("Oil")||e.includes("Treatment"))&&k.push({name:"Oil Treatment",price:5})})}let S=t?.estimated_time_minutes||0;return"Level 4"===f&&S<150?S=150:"Level 3"===f&&S<120?S=120:"Level 2"===f&&S<90&&(S=90),{base:{system:n,shape:a,length:l,isFill:C},addons:{finish:c,specialtyEffect:o,classicDesign:d},art:{level:f},bling:{density:m,xlCharmsCount:r,piercingsCount:0},modifiers:{foreignWork:N,repairsCount:w,soakOffOnly:!1},pedicure:{type:v,toeArtMatch:!1},extras:k,estimatedDuration:S}}let c=new(t(52355)).$D("AIzaSyDpimTYKmghqNy7bDEOn9andi36CHfkrDc");async function o(e,s,t){let i=null,r=e=>new Promise(s=>setTimeout(s,e));for(let l of["gemini-2.0-flash","gemini-2.0-flash-lite","gemini-flash-latest"])try{console.log(`ðŸ¤– Trying Gemini Model: ${l}...`);let i=c.getGenerativeModel({model:l}),r=(await new Promise(s=>{let t=new FileReader;t.onloadend=()=>s(t.result),t.readAsDataURL(e)})).split(",")[1],a="";"diagnostics"===s?a=`
        You are an expert Nail Technician specializing in Nail Health and Diagnostics.
        Analyze this image of a client's hand/nails to detect conditions and maintenance needs.
        
        Provide a JSON response with the following fields:
        {
            "reasoning_steps": [
                "Step 1: Check Growth - Look at the gap between cuticle and product...",
                "Step 2: Check Integrity - Look for lifting, cracks, or broken nails...",
                "Step 3: Check Skin Health - Look for dry cuticles, hangnails, or redness...",
                "Step 4: Recommend Services - Suggest fills, repairs, or treatments."
            ],
            "growth_weeks": 3, // Estimate weeks of growth based on gap size (0 if fresh, 2+ if gap visible)
            "repairs_needed": 1, // Count of broken or missing nails
            "conditions": ["4-week growth", "Broken index nail", "Dry cuticles", "Lifting detected", "Greenies (Pseudomonas) risk", "Trauma/Bruising"],
            "recommended_services": ["Rebalance/Fill", "Nail Repair", "Oil Treatment", "Deep Cuticle Clean", "IBX Treatment", "Soak Off"],
            "vibe": "Diagnostics Report: Detected 4-week growth and 1 broken nail. Cuticles appear dry. Lifting observed on middle finger.",
            // Fill these with defaults or detected values if applicable
            "shape": "Coffin", 
            "system": "Acrylic",
            "estimated_length": "Medium",
            "art_notes": "None",
            "foreign_work": "None"
        }
        
        CRITICAL: 
        - If you see green discoloration, flag "Greenies (Pseudomonas) risk".
        - If you see lifting (product separating from nail), flag "Lifting detected".
        - If cuticles are overgrown/dry, recommend "Deep Cuticle Clean".
        - If nails look weak/damaged, recommend "IBX Treatment".
        `:(a=`
        You are an expert Nail Technician and Pricing Specialist. 
        Analyze this nail art image with extreme attention to detail.
        `,t&&(a+=`
          Computer Vision Insights (Use these as hints for ART/TEXTURE, but IGNORE them for SHAPE):
          - Dense Caption: "${t.dense}"
          - Object Detection: "${JSON.stringify(t.od)}"
          *WARNING: The Computer Vision model often mistakes Coffin/Square for Stiletto. DO NOT TRUST IT FOR SHAPE. Use the Visual Rules below.*
          `),a+=`
        Provide a JSON response with the following fields:
        {
            "reasoning_steps": [
                "Step 1: Analyze Shape - Looking at tip geometry...",
                "Step 2: SIDE WALL CHECK - Are the sides parallel (Square), tapering in (Coffin/Stiletto), or flaring out (Duck)?",
                "Step 3: WIDTH CHECK - Compare the width of the tip to the width of the cuticle. Is the tip WIDER? (Yes = Duck/Flare)",
                "Step 4: Analyze Length - Comparing free edge to nail bed (Tip > 1.3x Bed = XXL)...",
                "Step 5: Analyze Art - Listing every technique...",
                "Step 6: Count Charms - Counting specific 3D items...",
                "Step 7: Final Assessment - Combining factors..."
            ],
            "shape": "Coffin, Stiletto, Almond, Square, Oval, or Duck",
            "system": "Acrylic, Gel-X, Hard Gel, or Structure Gel (look for thickness/apex)",
            "vibe": "A detailed, factual visual description of the nails. Start with length and shape, then describe color, design, and texture. Do NOT use flowery or poetic language. (e.g. 'Long coffin nails painted in a pink and white ombre with silver chrome stars on the ring finger').",
            "art_notes": "List EVERY technique seen. Look for: 3d charms, hand painted character, french tip, ombre, encapsulated, chrome, cat eye, airbrush, blooming gel.",
            "estimated_length": "Short (sport), Medium, Long, XL, or XXL (extendo)",
            "estimated_time_minutes": 120,
            "foreign_work": "None, Foreign Fill, or Foreign Removal (look for growth gap at cuticle or lifting)"
        }
        IMPORTANT PRICING RULES:
        1. **ART LEVEL (INDUSTRY STANDARD TIERS):**
           - **Level 1 (Simple):** Solid color (including white), simple glitter, or 1-2 accent nails.
           - **Level 2 (Moderate):** French tip (must have distinct tip color), Ombre, Chrome, Cat Eye, or simple lines.
           - **Level 3 (Complex):** Intricate hand-painted art, 3D charms, blooming gel, or mixed media.
           - **Level 4 (Masterpiece):** Encapsulated art, heavy bling, detailed character art.
           *Rule: If the nail is ONE solid color (even white), it is Level 1. It is NOT French Tip unless there is a distinct line.*
        2. **LENGTH:** VISUAL RULE: Compare the free edge (tip) to the nail bed (pink part).
           - If free edge < 50% of nail bed = Short.
           - If free edge is ~50-80% of nail bed = Medium.
           - If free edge is ~80-100% of nail bed = Long.
           - If free edge is > 100% (equal to or longer) of nail bed = XL.
           - If free edge is > 150% of nail bed = XXL (Extendo).
           - *Bias towards XXL for very long nails. If it looks "Extendo", it is XXL.*
        3. **SHAPE (TIP GEOMETRY RULE):** Look at the *corners* of the tip.
           - **DUCK (FLARE):** Side walls flare OUTWARDS. Tip is WIDER than the cuticle. Looks like a triangle or fan. *CRITICAL: If the tip is wider than the base, it is DUCK. It is NOT Coffin or Square. Even if it looks square at the end, if it flares out, it is Duck.*
           - **SQUARE:** Straight sides (PARALLEL). The tip width is EQUAL to the cuticle width. *CRITICAL: If the sides flare out, it is NOT Square.*
           - **COFFIN:** Tapered sides (getting narrower) with a flat tip. *CRITICAL: If it gets wider, it is NOT Coffin.*
           - **STILETTO:** Tapered sides and comes to a **SINGLE SHARP POINT** (no flat edge).
           - **ALMOND:** Tapered sides and **ROUNDED TIP** (no corners).
        4. **CHARM COUNTING:**
           - Count distinct 3D items (bows, hearts, bears, crosses).
           - If many small gems are used, describe as "Heavy Bling" or "Cluster".
        5. **TIME:** Estimate the time for a **FAST, EFFICIENT** professional. 
           - If "intricate", "pattern", or "detailed" is present, time MUST be > 150 mins.
           - Duck Shape adds +30 mins automatically (forming the flare).
           - Do not pad the time, but do not undercharge for complexity.
        6. **FOREIGN WORK:** Look closely at the cuticle area. If there is a visible gap (growth) or lifting, mark as "Foreign Fill" or "Foreign Removal".
        7. **CONTEXT:** Trust the "Dense Caption" for PATTERNS (checkered, swirls) but IGNORE it for background/scene descriptions.
        8. **FOCUS:** Describe the nails FACTUALLY. Start with the physical attributes (shape, length) then move to the design details (color, pattern, texture). Avoid metaphors like 'winter wonderland' or 'sugarplum fairy'. Be precise and descriptive.
        `);let n=(await i.generateContent([a,{inlineData:{data:r,mimeType:e.type}}])).response.text().match(/\{[\s\S]*\}/);if(!n)throw Error("No JSON found");return JSON.parse(n[0])}catch(e){console.warn(`âš ï¸ Model ${l} failed:`,e.message),i=e,await r(1e3)}return console.error("âŒ All Gemini Models Failed:",i),{shape:"",system:"",vibe:`âš ï¸ SYSTEM ERROR: All models failed. Last error: ${i?.message||JSON.stringify(i)}. API Key: Present. Falling back to Computer Vision.`,art_notes:"Analysis failed.",estimated_length:"",estimated_time_minutes:0,foreign_work:"None"}}let d={analyzeImage:async function(e,s="design"){try{let t,c="",d={};try{let s=r.auth.currentUser?.uid,l=Date.now();t=(0,i.iH)(r.storage,`scans/${s||"anonymous"}/${l}.jpg`),await (0,i.KV)(t,e),c=await (0,i.Jt)(t)}catch(e){throw Error(`STORAGE_ERROR: ${e.message}`)}try{let e=await fetch("https://upfacedevelopment--lacqr-brain-analyze-image.modal.run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image_url:c})});e.ok?d=await e.json():console.error(`âŒ Modal Error: ${e.status} ${e.statusText}`)}catch(e){console.error("âŒ Modal Fetch Failed (Network Error):",e)}let u=d.florence||{},m=d.objects||[],h=o(e,s,u),g=await h,x=m.find(e=>"nail_plate"===e.label||"nail"===e.label),p=x?x.box:void 0,f=n(m,p,g,u),b=(0,l.e_)(f,a.p),y=b.total;return{...f,confidence:.95,reasoning:g?.reasoning_steps?g.reasoning_steps.join("\n"):`Analyzed by Gemini & YOLO in ${s} mode.`,estimatedPrice:y,pricingDetails:{totalPrice:y,breakdown:{basePrice:b.breakdown.base,lengthCharge:b.breakdown.length,densityCharge:b.breakdown.bling,artTierCharge:b.breakdown.art,materialCharge:0,complexitySurcharge:b.breakdown.complexitySurcharge},details:{lengthTier:f.base?.length||"Short",densityTier:f.bling.density,artTier:f.art.level||"None",materialNotes:[]}},modalResult:{...d,gemini_debug:g},aiDescription:g?.vibe||"DEBUG ERROR: Gemini failed. Check logs.",visual_description:g?.vibe}}catch(s){console.error("âŒ Analysis Failed:",s);let e=`Analysis Error: ${s.message||"Unknown error occurred."}`;return{...n([],void 0,void 0,void 0),confidence:0,reasoning:"Analysis Failed",estimatedPrice:0,pricingDetails:{totalPrice:0,breakdown:{basePrice:0,lengthCharge:0,densityCharge:0,artTierCharge:0,materialCharge:0,complexitySurcharge:0},details:{lengthTier:"Short",densityTier:"None",artTier:"None",materialNotes:[]}},modalResult:{},aiDescription:e,visual_description:e}}},recommendService:async function(e,s){return{booking_codes:["Consultation"],estimated_duration_minutes:60,upsell_suggestion:"None",reasoning:"Service Sorter is being updated to new schema.",draft_reply:"Please contact us for a quote."}}}},60840:(e,s,t)=>{t.d(s,{H:()=>a});var i=t(68408),r=t(85251),l=t(9791);let a=(0,i.U)()((0,r.tJ)(e=>({menu:l.p,updateBasePrice:(s,t)=>e(e=>({menu:{...e.menu,basePrices:{...e.menu.basePrices,[s]:t}}})),updateLengthSurcharge:(s,t)=>e(e=>({menu:{...e.menu,lengthSurcharges:{...e.menu.lengthSurcharges,[s]:t}}})),updateFinishSurcharge:(s,t)=>e(e=>({menu:{...e.menu,finishSurcharges:{...e.menu.finishSurcharges,[s]:t}}})),updateSpecialtySurcharge:(s,t)=>e(e=>({menu:{...e.menu,specialtySurcharges:{...e.menu.specialtySurcharges,[s]:t}}})),updateClassicDesignSurcharge:(s,t)=>e(e=>({menu:{...e.menu,classicDesignSurcharges:{...e.menu.classicDesignSurcharges,[s]:t}}})),updateArtLevelPrice:(s,t)=>e(e=>({menu:{...e.menu,artLevelPrices:{...e.menu.artLevelPrices,[s]:t}}})),updateBlingDensityPrice:(s,t)=>e(e=>({menu:{...e.menu,blingDensityPrices:{...e.menu.blingDensityPrices,[s]:t}}})),updateUnitPrice:(s,t)=>e(e=>({menu:{...e.menu,unitPrices:{...e.menu.unitPrices,[s]:t}}})),updateModifierSurcharge:(s,t)=>e(e=>({menu:{...e.menu,modifierSurcharges:{...e.menu.modifierSurcharges,[s]:t}}})),updatePedicurePrice:(s,t)=>e(e=>({menu:{...e.menu,pedicurePrices:{...e.menu.pedicurePrices,[s]:t}}})),resetMenu:()=>e({menu:l.p})}),{name:"lacqr-service-menu-v2"}))},9791:(e,s,t)=>{t.d(s,{p:()=>i});let i={basePrices:{Acrylic:55,"Gel-X":65,"Hard Gel":60,"Structure Gel":50},fillPrices:{Acrylic:45,"Gel-X":55,"Hard Gel":50,"Structure Gel":40},lengthSurcharges:{Short:0,Medium:5,Long:10,XL:15,XXL:20},shapeSurcharges:{Square:0,Squoval:0,Coffin:0,Almond:5,Stiletto:5,Ballerina:5,Lipstick:5,Duck:10},finishSurcharges:{Glossy:0,Matte:5},specialtySurcharges:{None:0,Chrome:15,Holo:15,"Cat Eye":15},classicDesignSurcharges:{None:0,"French Tip":15,Ombre:15},artLevelPrices:{"Level 1":10,"Level 2":25,"Level 3":45,"Level 4":70},blingDensityPrices:{None:0,Minimal:10,Moderate:25,Heavy:50},unitPrices:{xlCharms:5,piercings:5,repairs:5,soakOff:20},modifierSurcharges:{None:0,"Foreign Fill":15,"Foreign Removal":25},pedicurePrices:{None:0,Classic:35,Gel:50,"Acrylic Toe Set":65},durations:{base:{Acrylic:60,"Gel-X":45,"Hard Gel":60,"Structure Gel":45},fill:{Acrylic:45,"Gel-X":45,"Hard Gel":45,"Structure Gel":30},length:{Short:0,Medium:15,Long:30,XL:60,XXL:90},shape:{Square:0,Squoval:0,Coffin:0,Almond:0,Stiletto:0,Ballerina:0,Lipstick:0,Duck:30},art:{"Level 1":15,"Level 2":30,"Level 3":60,"Level 4":120},bling:{None:0,Minimal:15,Moderate:30,Heavy:60},pedicure:{None:0,Classic:30,Gel:45,"Acrylic Toe Set":60},removal:30}}},21769:(e,s,t)=>{t.d(s,{Ok:()=>i,hv:()=>r});let i=async e=>new Promise(s=>{let t=new Image;t.crossOrigin="Anonymous",t.src=e,t.onload=()=>{let e=document.createElement("canvas"),i=e.getContext("2d");if(!i){s(!1);return}let r=500/t.width,l=t.height*r;e.width=500,e.height=l,i.drawImage(t,0,0,500,l);let a=i.getImageData(0,0,500,l).data,n=0,c=0;for(let e=0;e<a.length;e+=4){let s=.299*a[e]+.587*a[e+1]+.114*a[e+2];e+4<a.length&&(n+=Math.abs(s-(.299*a[e+4]+.587*a[e+5]+.114*a[e+6])),c++)}s(n/c<2)},t.onerror=()=>{console.error("Error loading image for blur check"),s(!1)}}),r=(e,s=2048,t=.9)=>new Promise((i,r)=>{let l=new FileReader;l.readAsDataURL(e),l.onload=l=>{let a=new Image;a.src=l.target?.result,a.onload=()=>{let l=document.createElement("canvas"),n=a.width,c=a.height;n>s&&(c=Math.round(c*s/n),n=s),l.width=n,l.height=c;let o=l.getContext("2d");o?.drawImage(a,0,0,n,c),l.toBlob(s=>{s?i(new File([s],e.name,{type:"image/jpeg",lastModified:Date.now()})):r(Error("Canvas is empty"))},"image/jpeg",t)},a.onerror=e=>r(e)},l.onerror=e=>r(e)})},86697:(e,s,t)=>{function i(e,s){let t={base:0,length:0,shape:0,addons:0,art:0,bling:0,modifiers:0,pedicure:0,extras:0,complexitySurcharge:0};if(e.base.isFill?t.base+=s.fillPrices[e.base.system]||0:t.base+=s.basePrices[e.base.system]||0,t.length+=s.lengthSurcharges[e.base.length]||0,t.shape+=s.shapeSurcharges[e.base.shape]||0,t.addons+=s.finishSurcharges[e.addons.finish]||0,t.addons+=s.specialtySurcharges[e.addons.specialtyEffect]||0,t.addons+=s.classicDesignSurcharges[e.addons.classicDesign]||0,e.art.level&&(t.art+=s.artLevelPrices[e.art.level]||0),t.bling+=s.blingDensityPrices[e.bling.density]||0,t.bling+=(e.bling.xlCharmsCount||0)*s.unitPrices.xlCharms,t.bling+=(e.bling.piercingsCount||0)*s.unitPrices.piercings,t.modifiers+=s.modifierSurcharges[e.modifiers.foreignWork]||0,t.modifiers+=(e.modifiers.repairsCount||0)*s.unitPrices.repairs,e.modifiers.soakOffOnly&&(t.modifiers+=s.unitPrices.soakOff),t.pedicure+=s.pedicurePrices[e.pedicure.type]||0,"None"!==e.pedicure.type&&e.pedicure.toeArtMatch&&e.art.level){let i=s.artLevelPrices[e.art.level]||0;t.pedicure+=.5*i}e.extras&&(t.extras=e.extras.reduce((e,s)=>e+s.price,0));let i=t.base+t.length+t.shape+t.addons+t.art+t.bling+t.modifiers+t.pedicure+t.extras;if(e.estimatedDuration){let s=e.estimatedDuration/60*45;s>i&&(t.complexitySurcharge=s-i,i=s)}return{total:Math.ceil(i),breakdown:t}}t.d(s,{e_:()=>i,pu:()=>r});let r={basePrices:{Acrylic:50,"Gel-X":60,"Hard Gel":65,"Structure Gel":55},fillPrices:{Acrylic:40,"Gel-X":50,"Hard Gel":55,"Structure Gel":45},lengthSurcharges:{Short:0,Medium:5,Long:10,XL:15,XXL:25},shapeSurcharges:{Square:0,Coffin:5,Stiletto:5,Almond:5,Duck:10,Squoval:0,Ballerina:5,Lipstick:5},finishSurcharges:{Glossy:0,Matte:5},specialtySurcharges:{None:0,Chrome:15,"Cat Eye":15,Holo:15},classicDesignSurcharges:{None:0,"French Tip":15,Ombre:15},artLevelPrices:{"Level 1":10,"Level 2":25,"Level 3":45,"Level 4":70},blingDensityPrices:{None:0,Minimal:10,Moderate:25,Heavy:45},modifierSurcharges:{None:0,"Foreign Fill":15,"Foreign Removal":20},pedicurePrices:{None:0,Classic:35,Gel:50,"Acrylic Toe Set":65},unitPrices:{xlCharms:5,piercings:5,repairs:5,soakOff:15},durations:{base:{Acrylic:60,"Gel-X":45,"Hard Gel":75,"Structure Gel":60},fill:{Acrylic:45,"Gel-X":45,"Hard Gel":45,"Structure Gel":30},length:{Short:0,Medium:10,Long:20,XL:30,XXL:45},shape:{Square:0,Coffin:10,Stiletto:15,Almond:10,Duck:30,Squoval:0,Ballerina:10,Lipstick:10},art:{"Level 1":15,"Level 2":30,"Level 3":60,"Level 4":90},bling:{None:0,Minimal:10,Moderate:20,Heavy:30},pedicure:{None:0,Classic:30,Gel:45,"Acrylic Toe Set":60},removal:30}}}};