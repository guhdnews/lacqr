"use strict";exports.id=839,exports.ids=[839,445],exports.modules={74846:(e,s,t)=>{t.d(s,{Z:()=>m});var a=t(10326),i=t(17577),l=t(94019),r=t(69436),n=t(59593),c=t(687),o=t(76),d=t(90445),u=t(58729);function m({isOpen:e,onClose:s,context:t,resultId:m,aiResult:h}){let{user:x}=(0,u.q)(),[g,b]=(0,i.useState)(null),[p,f]=(0,i.useState)(""),[y,j]=(0,i.useState)(!1),[v,N]=(0,i.useState)(!1);if(!e)return null;let w=async()=>{if(g||p){j(!0);try{await (0,o.addDoc)((0,o.collection)(d.db,"feedback"),{userId:x?.id||"anonymous",userName:x?.name||"Anonymous",context:t,rating:g,comment:p,resultId:m||null,aiResult:h||null,createdAt:new Date,userAgent:navigator.userAgent}),N(!0),setTimeout(()=>{s(),N(!1),b(null),f("")},2e3)}catch(e){console.error("Error submitting feedback:",e),alert("Failed to submit feedback. Please try again.")}finally{j(!1)}}};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[a.jsx("h3",{className:"font-bold text-gray-800",children:"Give Feedback"}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:a.jsx(l.Z,{size:20})})]}),a.jsx("div",{className:"p-6 space-y-6",children:v?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(r.Z,{size:32})}),a.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-2",children:"Thank You!"}),a.jsx("p",{className:"text-gray-500",children:"Your feedback helps us improve."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-600 mb-4 font-medium",children:"How was the AI analysis?"}),(0,a.jsxs)("div",{className:"flex justify-center gap-6",children:[a.jsx("button",{onClick:()=>b("positive"),className:`p-4 rounded-2xl transition-all ${"positive"===g?"bg-green-100 text-green-600 ring-2 ring-green-500":"bg-gray-50 text-gray-400 hover:bg-gray-100"}`,children:a.jsx(n.Z,{size:32})}),a.jsx("button",{onClick:()=>b("negative"),className:`p-4 rounded-2xl transition-all ${"negative"===g?"bg-red-100 text-red-600 ring-2 ring-red-500":"bg-gray-50 text-gray-400 hover:bg-gray-100"}`,children:a.jsx(c.Z,{size:32})})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Comments (Optional)"}),a.jsx("textarea",{value:p,onChange:e=>f(e.target.value),placeholder:"Tell us what went wrong or what you liked...",className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 focus:ring-2 focus:ring-pink-500 focus:outline-none min-h-[100px] resize-none"})]}),a.jsx("button",{onClick:w,disabled:y||!g&&!p,className:"w-full py-3 bg-charcoal text-white rounded-xl font-bold hover:bg-black transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:y?"Sending...":"Submit Feedback"})]})})]})})}},51822:(e,s,t)=>{t.d(s,{Z:()=>o});var a=t(10326),i=t(94019),l=t(63062),r=t(51896),n=t(85206),c=t(71821);function o({isOpen:e,onClose:s,context:t="lacqr_lens"}){if(!e)return null;let o="smart_quote"===t;return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:(0,a.jsxs)("div",{className:"bg-white rounded-3xl max-w-md w-full p-6 shadow-2xl relative animate-in zoom-in-95 duration-200",children:[a.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:a.jsx(i.Z,{size:24})}),(0,a.jsxs)("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(l.Z,{size:24,className:"text-pink-500"})}),a.jsx("h3",{className:"text-xl font-bold text-charcoal",children:o?"How to use Service Sorter":"How to use Lacqr Lens"}),a.jsx("p",{className:"text-sm text-gray-500",children:o?"Get service recommendations instantly":"Get accurate quotes in seconds"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"bg-gray-50 p-2 rounded-lg",children:a.jsx(r.Z,{size:20,className:"text-charcoal"})}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-bold text-sm text-charcoal",children:"1. Snap or Upload"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Take a clear photo of the nail design or upload one from your gallery. Ensure good lighting for best results."})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"bg-gray-50 p-2 rounded-lg",children:a.jsx(n.Z,{size:20,className:"text-charcoal"})}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-bold text-sm text-charcoal",children:"2. AI Analysis"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o?"Our AI analyzes the design to recommend the best services from the menu.":"Our AI detects shape, length, and designs. You can manually adjust any details."})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"bg-gray-50 p-2 rounded-lg",children:a.jsx(c.Z,{size:20,className:"text-charcoal"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-bold text-sm text-charcoal",children:["3. ",o?"Book It":"Quote & Receipt"]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o?"Copy the generated booking text to send to your nail tech.":'See the estimated total instantly. Switch to "Receipt" mode to download a professional breakdown.'})]})]})]}),a.jsx("button",{onClick:s,className:"w-full mt-8 bg-charcoal text-white font-bold py-3 rounded-xl hover:bg-black transition-colors",children:"Got it!"})]})})}},8729:(e,s,t)=>{t.d(s,{Z:()=>d});var a=t(10326),i=t(17577),l=t(85199),r=t(20968),n=t(1572),c=t(66307);let o=[{icon:l.Z,text:"Scanning nail geometry...",color:"text-blue-500"},{icon:r.Z,text:"Analyzing art complexity...",color:"text-purple-500"},{icon:n.Z,text:"Identifying add-ons...",color:"text-yellow-500"},{icon:c.Z,text:"Calculating estimate...",color:"text-green-500"}];function d({isVisible:e,onCancel:s}){let[t,l]=(0,i.useState)(0),[r,d]=(0,i.useState)(!1);return e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/90 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"w-full max-w-xs text-center space-y-8 p-6",children:[(0,a.jsxs)("div",{className:"relative mx-auto w-24 h-24",children:[a.jsx("div",{className:"absolute inset-0 border-4 border-gray-100 rounded-full"}),a.jsx("div",{className:"absolute inset-0 border-4 border-pink-500 border-t-transparent rounded-full animate-spin"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx(n.Z,{className:"text-pink-500 animate-pulse",size:32})})]}),a.jsx("div",{className:"space-y-4",children:o.map((e,s)=>{let i=e.icon,l=s===t,r=s<t;return(0,a.jsxs)("div",{className:`flex items-center space-x-3 transition-all duration-500 ${l||r?"opacity-100 transform translate-x-0":"opacity-30 transform -translate-x-2"}`,children:[a.jsx("div",{className:`
                                    w-8 h-8 rounded-full flex items-center justify-center transition-colors
                                    ${l?"bg-pink-100 "+e.color:""}
                                    ${r?"bg-green-100 text-green-600":""}
                                    ${l||r?"":"bg-gray-100 text-gray-300"}
                                `,children:r?a.jsx(c.Z,{size:16}):a.jsx(i,{size:16})}),a.jsx("span",{className:`text-sm font-medium ${l?"text-gray-900":"text-gray-400"}`,children:e.text})]},s)})}),s&&a.jsx("button",{onClick:s,className:"mt-8 px-6 py-2 rounded-full border border-gray-300 text-gray-500 text-sm hover:bg-gray-50 hover:text-gray-700 transition-colors",children:"Cancel Scan"}),r&&a.jsx("p",{className:"text-xs text-amber-600 animate-in fade-in slide-in-from-bottom-2 duration-1000 mt-4 max-w-[200px] mx-auto",children:"First scans take a little longer... hang tight! â³"}),a.jsx("p",{className:"text-xs text-gray-400 animate-pulse mt-4",children:"Powered by Lacqr"})]})}):null}},48241:(e,s,t)=>{t.d(s,{Z:()=>u});var a=t(10326),i=t(17577),l=t(60840),r=t(48998),n=t(1572),c=t(41291),o=t(96633),d=t(941);function u({initialSelection:e,onUpdate:s}){let{menu:t}=(0,l.H)(),[u,m]=(0,i.useState)(e),[h,x]=(0,i.useState)(0),[g,b]=(0,i.useState)(0),[p,f]=(0,i.useState)(!1),y=(e,s)=>{m(t=>({...t,base:{...t.base,[e]:s}}))},j=(e,s)=>{m(t=>({...t,addons:{...t.addons,[e]:s}}))},v=e=>{m(s=>({...s,art:{...s.art,level:e}}))},N=(e,s)=>{m(t=>({...t,bling:{...t.bling,[e]:s}}))},w=(e,s)=>{m(t=>({...t,modifiers:{...t.modifiers,[e]:s}}))},k=(e,s)=>{m(t=>({...t,pedicure:{...t.pedicure,[e]:s}}))};return(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-charcoal text-white p-6 flex justify-between items-center sticky top-0 z-10",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-bold font-display",children:"Service Configuration"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Customize your set details"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold font-display flex items-center justify-end",children:[a.jsx("span",{className:"text-gray-400 text-lg mr-1",children:"$"}),h.toFixed(2)]}),(0,a.jsxs)("div",{className:"flex items-center justify-end text-gray-400 text-xs uppercase tracking-wider mt-1",children:[a.jsx(r.Z,{className:"w-3 h-3 mr-1"}),Math.floor(g/60),"h ",g%60,"m"]})]})]}),(0,a.jsxs)("div",{className:"p-6 space-y-8",children:[u.aiDescription&&a.jsx("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-100 mb-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx(n.Z,{className:"w-5 h-5 text-purple-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-bold text-purple-900 text-sm uppercase tracking-wide mb-1",children:"AI Analysis"}),a.jsx("p",{className:"text-purple-800 text-sm leading-relaxed",children:u.aiDescription})]})]})}),u.pricingDetails&&(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100 mb-6",children:[a.jsx("h4",{className:"font-bold text-gray-900 text-sm uppercase tracking-wide mb-3",children:"Price Breakdown"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Base Set"}),(0,a.jsxs)("span",{className:"font-medium",children:["$",u.pricingDetails.breakdown.basePrice]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-gray-600",children:["Length (",u.base.length,")"]}),(0,a.jsxs)("span",{className:"font-medium",children:["+$",u.pricingDetails.breakdown.lengthCharge]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-gray-600",children:["Art (",u.art.level||"None",")"]}),(0,a.jsxs)("span",{className:"font-medium",children:["+$",u.pricingDetails.breakdown.artTierCharge]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-gray-600",children:["Bling (",u.bling.density,")"]}),(0,a.jsxs)("span",{className:"font-medium",children:["+$",u.pricingDetails.breakdown.densityCharge]})]}),u.pricingDetails.breakdown.materialCharge>0&&(0,a.jsxs)("div",{className:"flex justify-between text-purple-600",children:[a.jsx("span",{children:"Premium Materials"}),(0,a.jsxs)("span",{className:"font-medium",children:["+$",u.pricingDetails.breakdown.materialCharge]})]}),u.pricingDetails.breakdown.complexitySurcharge>0&&(0,a.jsxs)("div",{className:"flex justify-between text-red-600 font-medium",children:[a.jsx("span",{children:"Complexity / Time Surcharge"}),(0,a.jsxs)("span",{children:["+$",u.pricingDetails.breakdown.complexitySurcharge.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"pt-2 mt-2 border-t border-gray-200 flex justify-between font-bold",children:[a.jsx("span",{children:"Total Estimate"}),(0,a.jsxs)("span",{children:["$",u.pricingDetails.totalPrice]})]})]})]}),(0,a.jsxs)("section",{className:"bg-pink-50 rounded-2xl p-6 border border-pink-100",children:[(0,a.jsxs)("h3",{className:"text-sm font-bold text-gray-800 uppercase tracking-wider mb-4 flex items-center",children:[a.jsx("span",{className:"mr-2",children:"\uD83D\uDC85"})," Canvas"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Foundation"}),a.jsx("select",{value:u.base.system,onChange:e=>y("system",e.target.value),className:"w-full p-3 bg-white rounded-xl border border-pink-100 focus:ring-2 focus:ring-pink-500",children:Object.keys(t.basePrices).map(e=>(0,a.jsxs)("option",{value:e,children:[e," ($",t.basePrices[e],")"]},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shape"}),a.jsx("select",{value:u.base.shape,onChange:e=>y("shape",e.target.value),className:"w-full p-3 bg-white rounded-xl border border-pink-100 focus:ring-2 focus:ring-pink-500",children:Object.keys(t.shapeSurcharges).map(e=>(0,a.jsxs)("option",{value:e,children:[e," (+$",t.shapeSurcharges[e],")"]},e))})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Length"}),a.jsx("select",{value:u.base.length,onChange:e=>y("length",e.target.value),className:"w-full p-3 bg-white rounded-xl border border-pink-100 focus:ring-2 focus:ring-pink-500",children:Object.keys(t.lengthSurcharges).map(e=>(0,a.jsxs)("option",{value:e,children:[e," (+$",t.lengthSurcharges[e],")"]},e))})]})]})]}),(0,a.jsxs)("section",{className:"bg-blue-50 rounded-2xl p-6 border border-blue-100",children:[(0,a.jsxs)("h3",{className:"text-sm font-bold text-gray-800 uppercase tracking-wider mb-4 flex items-center",children:[a.jsx("span",{className:"mr-2",children:"\uD83C\uDFA8"})," Design"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Complexity"}),(0,a.jsxs)("select",{value:u.art.level||"None",onChange:e=>v("None"===e.target.value?null:e.target.value),className:"w-full p-3 bg-white rounded-xl border border-blue-100 focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"None",children:"None"}),Object.keys(t.artLevelPrices).map(e=>(0,a.jsxs)("option",{value:e,children:[e," (+$",t.artLevelPrices[e],")"]},e))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Finish"}),a.jsx("select",{value:u.addons.finish,onChange:e=>j("finish",e.target.value),className:"w-full p-3 bg-white rounded-xl border border-blue-100 focus:ring-2 focus:ring-blue-500",children:Object.keys(t.finishSurcharges).map(e=>(0,a.jsxs)("option",{value:e,children:[e," (+$",t.finishSurcharges[e],")"]},e))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Specialty Effect"}),a.jsx("select",{value:u.addons.specialtyEffect,onChange:e=>j("specialtyEffect",e.target.value),className:"w-full p-3 bg-white rounded-xl border border-blue-100 focus:ring-2 focus:ring-blue-500",children:Object.keys(t.specialtySurcharges).map(e=>(0,a.jsxs)("option",{value:e,children:[e," (+$",t.specialtySurcharges[e],")"]},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Classic Design"}),a.jsx("select",{value:u.addons.classicDesign,onChange:e=>j("classicDesign",e.target.value),className:"w-full p-3 bg-white rounded-xl border border-blue-100 focus:ring-2 focus:ring-blue-500",children:Object.keys(t.classicDesignSurcharges).map(e=>(0,a.jsxs)("option",{value:e,children:[e," (+$",t.classicDesignSurcharges[e],")"]},e))})]})]})]}),(0,a.jsxs)("section",{className:"bg-yellow-50 rounded-2xl p-6 border border-yellow-100",children:[(0,a.jsxs)("h3",{className:"text-sm font-bold text-gray-800 uppercase tracking-wider mb-4 flex items-center",children:[a.jsx("span",{className:"mr-2",children:"\uD83D\uDC8E"})," Inventory"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl border border-yellow-100",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Gems (Density)"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{let e=Object.keys(t.blingDensityPrices),s=e.indexOf(u.bling.density);N("density",e[Math.max(0,s-1)])},className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center hover:bg-yellow-200 text-yellow-700",children:"-"}),a.jsx("span",{className:"font-bold w-24 text-center text-sm",children:u.bling.density}),a.jsx("button",{onClick:()=>{let e=Object.keys(t.blingDensityPrices),s=e.indexOf(u.bling.density),a=Math.min(e.length-1,s+1);N("density",e[a])},className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center hover:bg-yellow-200 text-yellow-700",children:"+"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl border border-yellow-100",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Charms"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>N("xlCharmsCount",Math.max(0,u.bling.xlCharmsCount-1)),className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center hover:bg-yellow-200 text-yellow-700",children:"-"}),a.jsx("span",{className:"font-bold w-8 text-center",children:u.bling.xlCharmsCount}),a.jsx("button",{onClick:()=>N("xlCharmsCount",u.bling.xlCharmsCount+1),className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center hover:bg-yellow-200 text-yellow-700",children:"+"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl border border-yellow-100",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Piercings"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>N("piercingsCount",Math.max(0,u.bling.piercingsCount-1)),className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center hover:bg-yellow-200 text-yellow-700",children:"-"}),a.jsx("span",{className:"font-bold w-8 text-center",children:u.bling.piercingsCount}),a.jsx("button",{onClick:()=>N("piercingsCount",u.bling.piercingsCount+1),className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center hover:bg-yellow-200 text-yellow-700",children:"+"})]})]})]})]}),(0,a.jsxs)("section",{className:"bg-gray-50 rounded-2xl p-6 border border-gray-100",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-800 uppercase tracking-wider mb-4",children:"Appointment Details"}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requested Time"}),a.jsx("input",{type:"datetime-local",value:u.appointmentTime||"",onChange:e=>m(s=>({...s,appointmentTime:e.target.value})),className:"w-full p-3 bg-white rounded-xl border border-gray-200 focus:ring-2 focus:ring-gray-500"})]})]}),a.jsx("hr",{className:"border-gray-100"}),(0,a.jsxs)("section",{children:[(0,a.jsxs)("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4 flex items-center",children:[a.jsx(c.Z,{size:16,className:"mr-2 text-orange-500"}),"Modifiers"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Foreign Work"}),a.jsx("select",{value:u.modifiers.foreignWork,onChange:e=>w("foreignWork",e.target.value),className:"w-full p-3 bg-gray-50 rounded-xl border-none focus:ring-2 focus:ring-orange-500",children:Object.keys(t.modifierSurcharges).map(e=>(0,a.jsxs)("option",{value:e,children:[e," (+$",t.modifierSurcharges[e],")"]},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Repairs (Qty)"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>w("repairsCount",Math.max(0,u.modifiers.repairsCount-1)),className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200",children:"-"}),a.jsx("span",{className:"font-bold w-8 text-center",children:u.modifiers.repairsCount}),a.jsx("button",{onClick:()=>w("repairsCount",u.modifiers.repairsCount+1),className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200",children:"+"}),(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:["($",t.unitPrices.repairs,"/nail)"]})]})]})]}),a.jsx("div",{className:"mt-4",children:(0,a.jsxs)("label",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:u.modifiers.soakOffOnly,onChange:e=>w("soakOffOnly",e.target.checked),className:"w-5 h-5 text-pink-500 rounded focus:ring-pink-500 border-gray-300"}),(0,a.jsxs)("span",{className:"font-medium text-gray-700",children:["Soak Off Only (No Service) (+$",t.unitPrices.soakOff,")"]})]})})]}),a.jsx("hr",{className:"border-gray-100"}),(0,a.jsxs)("section",{children:[a.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Pedicure"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Type"}),a.jsx("select",{value:u.pedicure.type,onChange:e=>k("type",e.target.value),className:"w-full p-3 bg-gray-50 rounded-xl border-none focus:ring-2 focus:ring-blue-500",children:Object.keys(t.pedicurePrices).map(e=>(0,a.jsxs)("option",{value:e,children:[e," (+$",t.pedicurePrices[e],")"]},e))})]}),"None"!==u.pedicure.type&&a.jsx("div",{className:"flex items-center",children:(0,a.jsxs)("label",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-xl cursor-pointer hover:bg-blue-100 transition-colors w-full",children:[a.jsx("input",{type:"checkbox",checked:u.pedicure.toeArtMatch,onChange:e=>k("toeArtMatch",e.target.checked),className:"w-5 h-5 text-blue-500 rounded focus:ring-blue-500 border-gray-300"}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium text-blue-900 block",children:"Match Hand Art?"}),a.jsx("span",{className:"text-xs text-blue-700",children:"Adds 50% of Hand Art Price"})]})]})})]})]}),(0,a.jsxs)("div",{className:"border-t border-gray-100 pt-6",children:[(0,a.jsxs)("button",{onClick:()=>f(!p),className:"flex items-center text-xs text-gray-400 hover:text-gray-600 transition-colors",children:[p?a.jsx(o.Z,{className:"w-3 h-3 mr-1"}):a.jsx(d.Z,{className:"w-3 h-3 mr-1"}),p?"Hide AI Inspector":"Show AI Inspector (Debug)"]}),p&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-900 rounded-xl text-xs font-mono text-green-400 overflow-x-auto",children:[a.jsx("h4",{className:"font-bold text-gray-500 mb-2 uppercase tracking-wider",children:"Raw Analysis Data"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500 block mb-1",children:"Reasoning:"}),a.jsx("p",{className:"text-white",children:u.reasoning})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500 block mb-1",children:"Confidence:"}),(0,a.jsxs)("p",{className:"text-white",children:[u.confidence?(100*u.confidence).toFixed(1):0,"%"]})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500 block mb-1",children:"Modal Result (YOLO/Florence):"}),a.jsx("pre",{className:"bg-black p-2 rounded border border-gray-800",children:JSON.stringify(u.modalResult,null,2)})]})]})]})]})]})]})}},5186:(e,s,t)=>{t.d(s,{q:()=>i});var a=t(17577);let i=({cooldownTime:e=6e4,key:s}={})=>{let[t,i]=(0,a.useState)(!1),[l,r]=(0,a.useState)(0);return(0,a.useEffect)(()=>{if(s){let e=localStorage.getItem(`cooldown_${s}`);if(e){let t=parseInt(e,10),a=Date.now();t>a?(i(!0),r(Math.ceil((t-a)/1e3))):localStorage.removeItem(`cooldown_${s}`)}}},[s]),(0,a.useEffect)(()=>{let e;return t&&(e=setInterval(()=>{r(e=>e<=1?(i(!1),s&&localStorage.removeItem(`cooldown_${s}`),0):e-1)},1e3)),()=>clearInterval(e)},[t,s]),{isCoolingDown:t,remainingTime:l,startCooldown:(0,a.useCallback)(()=>{if(i(!0),r(Math.ceil(e/1e3)),s){let t=Date.now()+e;localStorage.setItem(`cooldown_${s}`,t.toString())}},[e,s])}}},90445:(e,s,t)=>{t.d(s,{auth:()=>c,db:()=>o,t:()=>d});var a=t(42585),i=t(95329),l=t(76),r=t(11552);let n=(0,a.ZF)({apiKey:"AIzaSyB15DcOdN4Qbhy7_u1oFEI6ZGxkBR52LcQ",authDomain:"lacqr-app-81378.firebaseapp.com",projectId:"lacqr-app-81378",storageBucket:"lacqr-app-81378.firebasestorage.app",messagingSenderId:"193977101196",appId:"1:193977101196:web:a2546131f7d99e17a2c4a9"}),c=(0,i.v0)(n),o=(0,l.ad)(n),d=(0,r.cF)(n)},11982:(e,s,t)=>{t.d(s,{Go:()=>d});var a=t(11552),i=t(90445),l=t(86697),r=t(9791);function n(e,s,t,a){let i,l="Short";if(t?.estimated_length){let e=t.estimated_length.toLowerCase();e.includes("xxl")||e.includes("extendo")?l="XXL":e.includes("xl")||e.includes("extra")?l="XL":e.includes("long")?l="Long":e.includes("medium")?l="Medium":(e.includes("short")||e.includes("sport")||e.includes("active"))&&(l="Short")}else if(s&&4===s.length){let[e,t,a,i]=s,r=(i-t)/(a-e);l=r<1.1?"Short":r<1.5?"Medium":r<2?"Long":r<2.5?"XL":"XXL"}let r="Coffin";if(t?.shape){let e=t.shape.toLowerCase();e.includes("lipstick")?r="Lipstick":e.includes("duck")||e.includes("flare")?r="Duck":e.includes("coffin")||e.includes("tapered square")?r="Coffin":e.includes("stiletto")||e.includes("pointed")||e.includes("sharp")?r="Stiletto":e.includes("ballerina")?r="Ballerina":e.includes("almond")?r="Almond":e.includes("squoval")||e.includes("square")&&e.includes("round")?r="Squoval":e.includes("square")&&(r="Square")}else if(a?.dense){let e=a.dense.toLowerCase();e.includes("lipstick")?r="Lipstick":e.includes("duck")?r="Duck":e.includes("stiletto")||e.includes("pointed")?r="Stiletto":e.includes("ballerina")?r="Ballerina":e.includes("almond")?r="Almond":e.includes("square")&&(r="Square")}let n="Acrylic";if(t?.system){let e=t.system.toLowerCase();e.includes("soft")||e.includes("x")||e.includes("gel-x")?n="Gel-X":e.includes("gel")&&!e.includes("polish")?n="Hard Gel":e.includes("acrylic")&&(n="Acrylic")}let c="Glossy",o="None",d="None",u=((t?.art_notes||"")+" "+(a?.dense||"")+" "+(t?.vibe||"")).toLowerCase();(u.includes("matte")||u.includes("velvet")||u.includes("frosted")||u.includes("no shine")||u.includes("dull"))&&(c="Matte"),u.includes("cat eye")||u.includes("magnetic")||u.includes("velvet effect")?o="Cat Eye":u.includes("holo")||u.includes("holographic")||u.includes("rainbow")?o="Holo":(u.includes("chrome")||u.includes("metallic")||u.includes("mirror"))&&(o="Chrome"),u.includes("ombre")||u.includes("gradient")||u.includes("fading")?d="Ombre":(u.includes("french tip")||u.includes("french")&&!u.includes("solid"))&&(d="French Tip"),0===(i=0+e.filter(e=>["charm","bow","flower","butterfly","heart","cross"].includes(e.label)).length)&&(u.includes("3d")||u.includes("charm")||u.includes("bow")||u.includes("large gem"))&&(u.includes("each nail")||u.includes("every nail")||u.includes("all nails")?i=10:(u.includes("ring finger")||u.includes("accent nail")||u.includes("two nails"),i=2));let m="None",h=0,x=s?(s[2]-s[0])*(s[3]-s[1]):1e5,g=e.filter(e=>["gem","stone","pearl"].includes(e.label)&&!["charm","bow","flower","butterfly","heart","cross"].includes(e.label));g.forEach(e=>{let s=e.box[2]-e.box[0],t=e.box[3]-e.box[1];h+=s*t});let b=h/x*100;m=0===g.length?u.includes("rhinestone")||u.includes("gem")||u.includes("crystal")||u.includes("charm")||u.includes("bling")?u.includes("heavy")||u.includes("covered")||u.includes("large")||u.includes("cluster")?"Heavy":"Moderate":"None":b<5?"Minimal":b<20?"Moderate":"Heavy";let p=null,f=new Set(e.map(e=>e.label)),y=g.length+i;f.has("encapsulated")||y>10?p="Level 4":f.has("3d_art")||y>5||f.has("hand_painted")?p="Level 3":f.has("french")||f.has("ombre")||y>2?p="Level 2":(y>0||f.has("sticker"))&&(p="Level 1");let j=null;if(u.includes("intricate")&&(u.includes("pattern")||u.includes("detailed")||u.includes("character")||u.includes("portrait"))?j="Level 4":u.includes("complex")||u.includes("3d")||u.includes("encapsulated")||u.includes("airbrush")||u.includes("blooming")||u.includes("detailed")?j="Level 3":u.includes("french")||u.includes("ombre")||u.includes("chrome")||u.includes("cat eye")||u.includes("glitter")||u.includes("sparkle")||u.includes("decorated")||u.includes("design")||u.includes("swirls")||u.includes("checkered")?j="Level 2":(u.includes("simple")||u.includes("sticker")||u.includes("minimal"))&&(j="Level 1"),j){let e=[null,"Level 1","Level 2","Level 3","Level 4"],s=e.indexOf(p);e.indexOf(j)>s&&(p=j)}let v="None";(u.includes("toe")||u.includes("feet")||u.includes("pedicure")||u.includes("sandal"))&&(v=p||"None"!==m?"Gel":"Classic");let N="None";if(t?.foreign_work){let e=t.foreign_work.toLowerCase();e.includes("removal")?N="Foreign Removal":e.includes("fill")&&(N="Foreign Fill")}let w=t?.estimated_time_minutes||0;return"Level 4"===p&&w<150?w=150:"Level 3"===p&&w<120?w=120:"Level 2"===p&&w<90&&(w=90),{base:{system:n,shape:r,length:l},addons:{finish:c,specialtyEffect:o,classicDesign:d},art:{level:p},bling:{density:m,xlCharmsCount:i,piercingsCount:0},modifiers:{foreignWork:N,repairsCount:0,soakOffOnly:!1},pedicure:{type:v,toeArtMatch:!1},estimatedDuration:w}}let c=new(t(52355)).$D("AIzaSyD3-f3MOh0Ln0pARYoqntfJZO0YW-KBvjE");async function o(e,s){let t=null,a=e=>new Promise(s=>setTimeout(s,e));for(let i of["gemini-2.0-flash","gemini-2.0-flash-lite","gemini-flash-latest"])try{console.log(`ðŸ¤– Trying Gemini Model: ${i}...`);let t=c.getGenerativeModel({model:i}),a=(await new Promise(s=>{let t=new FileReader;t.onloadend=()=>s(t.result),t.readAsDataURL(e)})).split(",")[1],l=`
        You are an expert Nail Technician and Pricing Specialist. 
        Analyze this nail art image with extreme attention to detail.
        `;s&&(l+=`
        Computer Vision Insights (Use these as hints for ART/TEXTURE, but IGNORE them for SHAPE):
        - Dense Caption: "${s.dense}"
        - Object Detection: "${JSON.stringify(s.od)}"
        *WARNING: The Computer Vision model often mistakes Coffin/Square for Stiletto. DO NOT TRUST IT FOR SHAPE. Use the Visual Rules below.*
        `),l+=`
        Provide a JSON response with the following fields:
        {
            "shape": "Coffin, Stiletto, Almond, Square, or Oval",
            "system": "Acrylic, Gel-X, Hard Gel, or Structure Gel (look for thickness/apex)",
            "vibe": "A detailed, factual visual description of the nails. Start with length and shape, then describe color, design, and texture. Do NOT use flowery or poetic language. (e.g. 'Long coffin nails painted in a pink and white ombre with silver chrome stars on the ring finger').",
            "art_notes": "List EVERY technique seen. Look for: 3d charms, hand painted character, french tip, ombre, encapsulated, chrome, cat eye, airbrush, blooming gel.",
            "estimated_length": "Short (sport), Medium, Long, XL, or XXL (extendo)",
            "estimated_time_minutes": 120,
            "foreign_work": "None, Foreign Fill, or Foreign Removal (look for growth gap at cuticle or lifting)"
        }
        IMPORTANT PRICING RULES:
        1. **ART LEVEL (INDUSTRY STANDARD TIERS):**
           - **Level 1 (Simple):** Solid color (including white), simple glitter, or 1-2 accent nails.
           - **Level 2 (Moderate):** French tip (must have distinct tip color), Ombre, Chrome, Cat Eye, or simple lines.
           - **Level 3 (Complex):** Intricate hand-painted art, 3D charms, blooming gel, or mixed media.
           - **Level 4 (Masterpiece):** Encapsulated art, heavy bling, detailed character art.
           *Rule: If the nail is ONE solid color (even white), it is Level 1. It is NOT French Tip unless there is a distinct line.*
        2. **LENGTH:** VISUAL RULE: Compare the free edge (tip) to the nail bed (pink part).
           - If free edge < 50% of nail bed = Short.
           - If free edge is ~50-80% of nail bed = Medium.
           - If free edge is ~100% (equal to) nail bed = Long.
           - If free edge is > 100% of nail bed = XL.
           - If free edge is > 150% of nail bed = XXL.
           - If shape is Stiletto/Duck, bias towards XL/XXL.
        3. **SHAPE (TIP GEOMETRY RULE):** Look at the *corners* of the tip.
           - **COFFIN:** Tapered sides but has **TWO SHARP CORNERS** at the tip (flat edge).
           - **STILETTO:** Tapered sides and comes to a **SINGLE SHARP POINT** (no flat edge).
           - **SQUARE:** Straight sides and **TWO SHARP CORNERS** (flat edge).
           - **ALMOND:** Tapered sides and **ROUNDED TIP** (no corners).
        4. **TIME:** Estimate the time for a **FAST, EFFICIENT** professional. 
           - If "intricate", "pattern", or "detailed" is present, time MUST be > 150 mins.
           - Do not pad the time, but do not undercharge for complexity.
        5. **FOREIGN WORK:** Look closely at the cuticle area. If there is a visible gap (growth) or lifting, mark as "Foreign Fill" or "Foreign Removal".
        6. **CONTEXT:** Trust the "Dense Caption" for PATTERNS (checkered, swirls) but IGNORE it for background/scene descriptions.
        7. **FOCUS:** Describe the nails FACTUALLY. Start with the physical attributes (shape, length) then move to the design details (color, pattern, texture). Avoid metaphors like 'winter wonderland' or 'sugarplum fairy'. Be precise and descriptive.
        `;let r=(await t.generateContent([l,{inlineData:{data:a,mimeType:e.type}}])).response.text().match(/\{[\s\S]*\}/);if(!r)throw Error("No JSON found");return JSON.parse(r[0])}catch(e){console.warn(`âš ï¸ Model ${i} failed:`,e.message),t=e,await a(1e3)}return console.error("âŒ All Gemini Models Failed:",t),{shape:"",system:"",vibe:`âš ï¸ SYSTEM ERROR: All models failed. Last error: ${t?.message||JSON.stringify(t)}. API Key: Present. Falling back to Computer Vision.`,art_notes:"Analysis failed.",estimated_length:"",estimated_time_minutes:0,foreign_work:"None"}}let d={analyzeImage:async function(e){try{let s=i.auth.currentUser?.uid;if(s){let{doc:e,getDoc:a,setDoc:i,updateDoc:l,increment:r}=await Promise.resolve().then(t.bind(t,76)),{db:n}=await Promise.resolve().then(t.bind(t,90445)),c=new Date().toISOString().split("T")[0],o=e(n,"users",s,"usage","daily"),d=await a(o),u=0;if(d.exists()){let e=d.data();e.date===c?u=e.count:await i(o,{date:c,count:0})}else await i(o,{date:c,count:0});let m=e(n,"users",s),h=await a(m);if(h.data()?.subscription!=="pro"&&u>=5)throw Error("Daily scan limit reached (5/5). Upgrade to Pro for unlimited scans.");await l(o,{count:r(1),date:c})}let c=Date.now(),d=(0,a.iH)(i.t,`scans/${s||"anonymous"}/${c}.jpg`);await (0,a.KV)(d,e);let u=await (0,a.Jt)(d),m=await fetch("https://upfacedevelopment--lacqr-brain-analyze-image.modal.run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image_url:u})});m.ok||console.error(`âŒ Modal Error: ${m.status} ${m.statusText}`);let h=m.ok?await m.json():{},x=h.florence||{},g=h.objects||[],b=o(e,x),p=await b,f=g.find(e=>"nail_plate"===e.label||"nail"===e.label),y=f?f.box:void 0,j=n(g,y,p,x),v=(0,l.e)(j,r.p),N=v.total;return{...j,confidence:.95,reasoning:`Analyzed by Gemini & YOLO. Shape: ${j.base.shape}. System: ${j.base.system}. Detected ${h.objects?.length||0} objects.`,estimatedPrice:N,pricingDetails:{totalPrice:N,breakdown:{basePrice:v.breakdown.base,lengthCharge:v.breakdown.length,densityCharge:v.breakdown.bling,artTierCharge:v.breakdown.art,materialCharge:0,complexitySurcharge:v.breakdown.complexitySurcharge},details:{lengthTier:j.base?.length||"Short",densityTier:j.bling.density,artTier:j.art.level||"None",materialNotes:[]}},modalResult:{...h,gemini_debug:p},aiDescription:p?.vibe||"DEBUG ERROR: Gemini failed. Check logs."}}catch(e){return console.error("âŒ Analysis Failed:",e),{...n([],void 0,void 0,void 0),confidence:0,reasoning:"Analysis Failed",estimatedPrice:0,pricingDetails:{totalPrice:0,breakdown:{basePrice:0,lengthCharge:0,densityCharge:0,artTierCharge:0,materialCharge:0,complexitySurcharge:0},details:{lengthTier:"Short",densityTier:"None",artTier:"None",materialNotes:[]}},modalResult:{},aiDescription:`DEBUG ERROR: ${e.message||JSON.stringify(e)}`}}},recommendService:async function(e,s){return{booking_codes:["Consultation"],estimated_duration_minutes:60,upsell_suggestion:"None",reasoning:"Service Sorter is being updated to new schema.",draft_reply:"Please contact us for a quote."}}}},21769:(e,s,t)=>{t.d(s,{Ok:()=>a,hv:()=>i});let a=async e=>new Promise(s=>{let t=new Image;t.crossOrigin="Anonymous",t.src=e,t.onload=()=>{let e=document.createElement("canvas"),a=e.getContext("2d");if(!a){s(!1);return}let i=500/t.width,l=t.height*i;e.width=500,e.height=l,a.drawImage(t,0,0,500,l);let r=a.getImageData(0,0,500,l).data,n=0,c=0;for(let e=0;e<r.length;e+=4){let s=.299*r[e]+.587*r[e+1]+.114*r[e+2];e+4<r.length&&(n+=Math.abs(s-(.299*r[e+4]+.587*r[e+5]+.114*r[e+6])),c++)}s(n/c<2)},t.onerror=()=>{console.error("Error loading image for blur check"),s(!1)}}),i=(e,s=2048,t=.9)=>new Promise((a,i)=>{let l=new FileReader;l.readAsDataURL(e),l.onload=l=>{let r=new Image;r.src=l.target?.result,r.onload=()=>{let l=document.createElement("canvas"),n=r.width,c=r.height;n>s&&(c=Math.round(c*s/n),n=s),l.width=n,l.height=c;let o=l.getContext("2d");o?.drawImage(r,0,0,n,c),l.toBlob(s=>{s?a(new File([s],e.name,{type:"image/jpeg",lastModified:Date.now()})):i(Error("Canvas is empty"))},"image/jpeg",t)},r.onerror=e=>i(e)},l.onerror=e=>i(e)})},86697:(e,s,t)=>{function a(e,s){let t={base:0,length:0,shape:0,addons:0,art:0,bling:0,modifiers:0,pedicure:0,extras:0,complexitySurcharge:0};if(e.base.isFill?t.base+=s.fillPrices[e.base.system]||0:t.base+=s.basePrices[e.base.system]||0,t.length+=s.lengthSurcharges[e.base.length]||0,t.shape+=s.shapeSurcharges[e.base.shape]||0,t.addons+=s.finishSurcharges[e.addons.finish]||0,t.addons+=s.specialtySurcharges[e.addons.specialtyEffect]||0,t.addons+=s.classicDesignSurcharges[e.addons.classicDesign]||0,e.art.level&&(t.art+=s.artLevelPrices[e.art.level]||0),t.bling+=s.blingDensityPrices[e.bling.density]||0,t.bling+=(e.bling.xlCharmsCount||0)*s.unitPrices.xlCharms,t.bling+=(e.bling.piercingsCount||0)*s.unitPrices.piercings,t.modifiers+=s.modifierSurcharges[e.modifiers.foreignWork]||0,t.modifiers+=(e.modifiers.repairsCount||0)*s.unitPrices.repairs,e.modifiers.soakOffOnly&&(t.modifiers+=s.unitPrices.soakOff),t.pedicure+=s.pedicurePrices[e.pedicure.type]||0,"None"!==e.pedicure.type&&e.pedicure.toeArtMatch&&e.art.level){let a=s.artLevelPrices[e.art.level]||0;t.pedicure+=.5*a}e.extras&&(t.extras=e.extras.reduce((e,s)=>e+s.price,0));let a=t.base+t.length+t.shape+t.addons+t.art+t.bling+t.modifiers+t.pedicure+t.extras;if(e.estimatedDuration){let s=e.estimatedDuration/60*45;s>a&&(t.complexitySurcharge=s-a,a=s)}return{total:Math.ceil(a),breakdown:t}}t.d(s,{e:()=>a})}};