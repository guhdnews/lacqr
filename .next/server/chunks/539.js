"use strict";exports.id=539,exports.ids=[539],exports.modules={80539:(e,t,s)=>{s.d(t,{Z:()=>z});var a=s(10326),l=s(17577),n=s.n(l),r=s(88378),i=s(63062),o=s(1572),d=s(94019),c=s(62881);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,c.Z)("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),u=(0,c.Z)("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var m=s(59593),h=s(687),p=s(32933),g=s(43810);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let b=(0,c.Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var y=s(90434),f=s(11982),j=s(21769),v=s(8729),k=s(51822),N=s(5186),w=s(48241),C=s(86697),S=s(74846);function z({menu:e,clients:t=[],onShareQuote:s,onQuoteGenerated:c,isAuthenticated:z=!1,themeColor:Z="#ec4899",buttonStyle:q="rounded",onBook:$}){let[R,A]=(0,l.useState)(null),[_,O]=(0,l.useState)(!1),[T,F]=(0,l.useState)(null),[I,P]=(0,l.useState)(!1),[B,U]=(0,l.useState)(1),[D,G]=(0,l.useState)(!1),[L,E]=(0,l.useState)(!1),[H,M]=(0,l.useState)(""),[W,Y]=(0,l.useState)(""),[V,J]=(0,l.useState)(!1),[K,Q]=(0,l.useState)("form"),[X,ee]=(0,l.useState)({name:"",phone:"",instagram:"",notes:""}),[et,es]=(0,l.useState)(!1),[ea,el]=(0,l.useState)(!1),{isCoolingDown:en,remainingTime:er,startCooldown:ei}=(0,N.q)({cooldownTime:1e4,key:"smart_quote_scan"}),eo=n().useRef(null),ed=async t=>{let s=t.target.files?.[0];if(eo.current&&(eo.current.value=""),en){alert(`Please wait ${er}s before scanning again.`);return}if(s){let t=new FileReader;t.onloadend=()=>A(t.result),t.readAsDataURL(s),O(!0),F(null),P(!1),U(1);try{let t=await (0,j.hv)(s),a=await f.Go.analyzeImage(t);F(a),c&&c(a);let l=(0,C.e_)(a,e),n=`Hey! Thanks for sending the inspo. Based on this design, I'd quote this as a ${a.base.length} ${a.base.shape} ${a.base.system} set with ${a.art.level||"no"} art. The estimated total would be around $${l.total.toFixed(2)}. Let me know if you'd like to book!`;M(n),ei()}catch(e){console.error("Analysis failed",e),alert("Analysis failed. Please try again.")}finally{O(!1)}}},ec=()=>{A(null),F(null),O(!1),P(!1),U(1)},ex=async()=>{s&&T&&await s(T,W)};return(0,a.jsxs)("div",{className:"flex flex-col max-w-2xl mx-auto relative bg-white rounded-[2.5rem] shadow-xl overflow-hidden border-4 border-pink-100 my-4 transition-all duration-500 pb-8",children:[(0,a.jsxs)("div",{className:"p-6 z-10 space-y-6 bg-gradient-to-b from-pink-50 to-white",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("div",{className:"flex items-center gap-2",children:z&&a.jsx(y.default,{href:"/dashboard/settings",className:"p-2 bg-white border border-pink-100 rounded-full text-gray-500 hover:text-pink-600 hover:border-pink-300 transition-all shadow-sm",children:a.jsx(r.Z,{size:20})})}),a.jsx("h2",{className:"text-pink-900 font-bold text-lg tracking-wide",children:"Service Sorter"}),a.jsx("button",{onClick:()=>E(!0),className:"p-2 bg-white border border-pink-100 rounded-full text-gray-500 hover:text-pink-600 hover:border-pink-300 transition-all shadow-sm",children:a.jsx(i.Z,{size:20})})]}),(0,a.jsxs)("div",{className:"text-center px-4",children:[a.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Upload inspo, get service recommendations."}),en&&(0,a.jsxs)("p",{className:"text-xs text-amber-600 font-medium animate-pulse mt-2",children:["Cooling down... ",er,"s"]})]})]}),!R&&!T&&a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("button",{onClick:()=>{F({base:{system:"Acrylic",shape:"Square",length:"Short"},addons:{finish:"Glossy",specialtyEffect:"None",classicDesign:"None"},art:{level:null},bling:{density:"None",xlCharmsCount:0,piercingsCount:0},modifiers:{foreignWork:"None",repairsCount:0,soakOffOnly:!1},pedicure:{type:"None",toeArtMatch:!1}})},className:"text-sm font-bold text-gray-500 hover:text-pink-500 transition-colors underline",children:"Skip Upload & Book Manually"})}),(0,a.jsxs)("div",{className:"relative mx-4 mb-4 rounded-3xl overflow-hidden bg-gray-50 border-2 border-dashed border-pink-200 group min-h-[400px]",children:[R&&a.jsx("img",{src:R,alt:"Captured",className:`w-full h-full object-cover absolute inset-0 transition-opacity duration-500 ${_?"opacity-50 blur-sm":"opacity-100"}`,style:{transform:`scale(${B})`,transformOrigin:"center",transition:"transform 0.3s ease-out"}}),(_||!R&&!T)&&a.jsx("div",{className:`absolute inset-0 z-20 pointer-events-none ${_||R?"":"hidden"}`,children:a.jsx(v.Z,{isScanning:_,mode:"design"})}),!R&&!T&&(0,a.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-30 pointer-events-none gap-8",children:[(0,a.jsxs)("div",{className:"relative group pointer-events-auto",children:[a.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-pink-200 to-purple-200 rounded-full blur-xl opacity-50 group-hover:opacity-75 transition duration-1000 group-hover:duration-200 animate-pulse"}),(0,a.jsxs)("label",{className:"relative w-32 h-32 bg-white rounded-full flex flex-col items-center justify-center cursor-pointer hover:scale-105 transition-transform shadow-[0_8px_30px_rgb(0,0,0,0.12)] border-4 border-pink-50",children:[a.jsx(o.Z,{size:40,className:"text-pink-500 mb-2"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-gray-400",children:"Tap to Scan"}),a.jsx("input",{ref:eo,type:"file",accept:"image/*",className:"hidden",onChange:ed})]})]}),a.jsx("p",{className:"text-xs text-gray-400",children:"or upload from gallery"})]}),R&&!_&&(0,a.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[(0,a.jsxs)("div",{className:"absolute top-4 right-4 flex flex-col gap-2 pointer-events-auto",children:[a.jsx("button",{onClick:ec,className:"p-2 bg-white/80 backdrop-blur-md rounded-full text-gray-700 hover:text-red-500 transition-all shadow-sm",title:"Reset",children:a.jsx(d.Z,{size:20})}),a.jsx("button",{onClick:()=>G(!0),className:"p-2 bg-white/80 backdrop-blur-md rounded-full text-gray-700 hover:text-blue-500 transition-all shadow-sm",title:"Full Screen",children:a.jsx(x,{size:20})})]}),a.jsx("div",{className:"absolute bottom-4 right-4 pointer-events-auto",children:(0,a.jsxs)("button",{onClick:()=>{U(e=>1===e?2.5:1)},className:"px-3 py-1.5 bg-black/50 backdrop-blur-md rounded-full text-white text-xs font-medium hover:bg-black/70 transition-all flex items-center gap-1",children:[1===B?a.jsx(x,{size:14}):a.jsx(u,{size:14}),1===B?"Zoom In":"Reset Zoom"]})})]})]}),T&&(0,a.jsxs)("div",{className:"space-y-6 animate-in slide-in-from-bottom-10 fade-in duration-500 px-4",children:[T.visual_description&&(0,a.jsxs)("div",{className:"bg-indigo-50 border border-indigo-100 p-4 rounded-xl relative",children:[a.jsx("h4",{className:"text-xs font-bold text-indigo-800 uppercase tracking-wider mb-2",children:"AI Visual Analysis"}),(0,a.jsxs)("p",{className:"text-sm text-indigo-900 italic mb-3",children:['"',T.visual_description,'"']}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>el(!0),className:"p-1.5 rounded-lg hover:bg-indigo-100 text-indigo-400 hover:text-indigo-600 transition-colors",title:"Good analysis",children:a.jsx(m.Z,{size:16})}),a.jsx("button",{onClick:()=>el(!0),className:"p-1.5 rounded-lg hover:bg-indigo-100 text-indigo-400 hover:text-indigo-600 transition-colors",title:"Bad analysis",children:a.jsx(h.Z,{size:16})})]})]}),a.jsx(w.Z,{initialSelection:T,onUpdate:e=>F(e)}),z&&t.length>0&&(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm",children:[a.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider font-bold mb-2",children:"Link to Client (Optional)"}),(0,a.jsxs)("select",{value:W,onChange:e=>Y(e.target.value),className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-100 text-sm font-medium text-charcoal focus:outline-none focus:border-pink-300",children:[a.jsx("option",{value:"",children:"Select a client..."}),t.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),!z&&$&&(0,a.jsxs)("button",{onClick:()=>J(!0),className:`w-full py-4 text-white font-bold shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all flex items-center justify-center gap-2 ${"pill"===q?"rounded-full":"square"===q?"rounded-none":"rounded-xl"}`,style:{backgroundColor:Z},children:[a.jsx(o.Z,{size:20}),"Request Appointment"]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider font-bold",children:"Draft Reply"}),a.jsx("span",{className:"text-xs text-pink-500 font-medium",children:"Editable"})]}),a.jsx("textarea",{value:H,onChange:e=>M(e.target.value),className:"w-full bg-gray-50 p-4 rounded-xl text-gray-700 text-sm leading-relaxed border border-gray-100 focus:outline-none focus:border-pink-300 focus:ring-2 focus:ring-pink-100 transition-all min-h-[100px] resize-none"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>{H&&(navigator.clipboard.writeText(H),P(!0),setTimeout(()=>P(!1),2e3))},className:`flex-1 py-4 font-medium transition-all shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center space-x-2 ${I?"text-white":"text-white hover:opacity-90"} ${"pill"===q?"rounded-full":"square"===q?"rounded-none":"rounded-xl"}`,style:{backgroundColor:I?"#22c55e":Z},children:I?(0,a.jsxs)(a.Fragment,{children:[a.jsx(p.Z,{size:20}),a.jsx("span",{children:"Copied!"})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(g.Z,{size:20}),a.jsx("span",{children:"Copy Text"})]})}),z&&a.jsx("button",{onClick:ex,className:`p-4 font-bold text-gray-500 shadow-lg transition-all flex items-center justify-center bg-white hover:text-pink-500 ${"pill"===q?"rounded-full":"square"===q?"rounded-none":"rounded-xl"}`,children:a.jsx(b,{size:20})})]})]}),D&&R&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 bg-black/95 flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:()=>G(!1),children:[a.jsx("button",{onClick:()=>G(!1),className:"absolute top-4 right-4 text-white/80 hover:text-white p-2",children:a.jsx(d.Z,{size:32})}),a.jsx("img",{src:R,alt:"Full size",className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl",onClick:e=>e.stopPropagation()}),a.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 text-white/50 text-sm",children:"Tap anywhere to close"})]}),a.jsx(k.Z,{isOpen:L,onClose:()=>E(!1),context:"smart_quote"}),a.jsx(S.Z,{isOpen:ea,onClose:()=>el(!1),context:"smart_quote",aiResult:T}),V&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:(0,a.jsxs)("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"form"===K?"Request Appointment":"Request Sent!"}),a.jsx("button",{onClick:()=>J(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx(d.Z,{size:24})})]}),"form"===K?(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:["Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:X.name,onChange:e=>ee({...X,name:e.target.value}),className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-pink-500 focus:outline-none",placeholder:"Your full name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:["Phone ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"tel",value:X.phone,onChange:e=>ee({...X,phone:e.target.value}),className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-pink-500 focus:outline-none",placeholder:"(555) 123-4567"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Instagram Handle (Optional)"}),a.jsx("input",{type:"text",value:X.instagram,onChange:e=>ee({...X,instagram:e.target.value}),className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-pink-500 focus:outline-none",placeholder:"@username"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Notes (Optional)"}),a.jsx("textarea",{value:X.notes,onChange:e=>ee({...X,notes:e.target.value}),className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-pink-500 focus:outline-none h-24 resize-none",placeholder:"Any special requests or availability?"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 pt-2",children:[a.jsx("input",{type:"checkbox",id:"policy-agree",className:"w-5 h-5 rounded border-gray-300 text-pink-500 focus:ring-pink-500"}),a.jsx("label",{htmlFor:"policy-agree",className:"text-sm text-gray-600",children:"I agree to the salon policies."})]}),a.jsx("button",{onClick:async()=>{if(!X.name||!X.phone){alert("Please fill in all required fields.");return}es(!0);try{$&&T&&(await $(T,X),Q("success"))}catch(e){console.error("Booking failed",e),alert("Something went wrong. Please try again.")}finally{es(!1)}},disabled:et,className:"w-full py-4 bg-black text-white font-bold rounded-xl hover:bg-gray-900 transition-colors disabled:opacity-50 mt-4",children:et?"Sending Request...":"Send Request"})]}):(0,a.jsxs)("div",{className:"p-8 text-center space-y-4",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(p.Z,{size:32})}),a.jsx("h4",{className:"text-2xl font-bold text-gray-900",children:"You're on the list!"}),(0,a.jsxs)("p",{className:"text-gray-500",children:["Thanks for your request, ",X.name,". We've received your quote and will text you at ",X.phone," shortly to confirm your appointment."]}),a.jsx("button",{onClick:()=>{J(!1),Q("form"),ee({name:"",phone:"",instagram:"",notes:""}),ec()},className:"w-full py-3 bg-gray-100 text-gray-900 font-bold rounded-xl hover:bg-gray-200 transition-colors mt-6",children:"Close"})]})]})})]})}}};