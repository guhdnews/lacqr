(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2785],{26191:function(t,e,a){Promise.resolve().then(a.bind(a,26314))},26314:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return u}});var i=a(57437),n=a(2265),o=a(43257),r=a(53371),c=a(11925),l=a(97311),d=a(69842),s=a(89506);function u(){let{menu:t}=(0,r.H)(),{user:e}=(0,o.q)(),[a,u]=(0,n.useState)([]);(0,n.useEffect)(()=>{e&&e.id&&(async()=>{try{let t=(0,d.IO)((0,d.collection)(s.db,"clients"),(0,d.ar)("userId","==",e.id),(0,d.Xo)("createdAt","desc")),a=await (0,d.PL)(t);u(a.docs.map(t=>({id:t.id,...t.data()})))}catch(t){console.error("Error fetching clients",t)}})()},[e]);let f=async(i,n)=>{if(i)try{var o;let r=(0,c.e_)(i,t),l={type:"smart_quote",data:i,totalPrice:r,createdAt:new Date,salonName:(null==e?void 0:e.name)||"Your Salon",userId:null==e?void 0:e.id,clientId:n||null,clientName:n?null===(o=a.find(t=>t.id===n))||void 0===o?void 0:o.name:null,status:"shared"},u=await (0,d.addDoc)((0,d.collection)(s.db,"quotes"),l);if(n){let t=(0,d.doc)(s.db,"clients",n);await (0,d.r7)(t,{lastVisit:new Date,history:(0,d.vr)({id:u.id,date:new Date,service:"Smart Quote Analysis",price:r.total,notes:"Generated via Smart Quote"})})}let f="".concat(window.location.origin,"/q/").concat(u.id);await navigator.clipboard.writeText(f),alert("Link copied to clipboard! Send it to your client.")}catch(t){console.error("Error sharing quote:",t),alert("Failed to create share link.")}};return(0,i.jsx)(l.Z,{menu:t,clients:a,onShareQuote:f,isAuthenticated:!0})}}},function(t){t.O(0,[4358,9637,9279,6704,9144,5623,7138,742,5752,1943,7311,2971,7023,1744],function(){return t(t.s=26191)}),_N_E=t.O()}]);