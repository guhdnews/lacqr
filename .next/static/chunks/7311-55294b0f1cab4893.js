"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7311],{6884:function(e,t,a){a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(78030).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},24258:function(e,t,a){a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(78030).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},97311:function(e,t,a){a.d(t,{Z:function(){return C}});var s=a(57437),l=a(2265),n=a(24258),i=a(99687),o=a(33907),r=a(44828),c=a(74697),d=a(82616),x=a(55636),u=a(3722),h=a(22468),m=a(6884);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,a(78030).Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var g=a(87138),b=a(78233),f=a(39134),y=a(23700),j=a(98714),v=a(22682),k=a(60479),w=a(11925),N=a(18866);function C(e){let{menu:t,clients:a=[],onShareQuote:C,onQuoteGenerated:z,isAuthenticated:Z=!1,themeColor:S="#ec4899",buttonStyle:q="rounded"}=e,[_,T]=(0,l.useState)(null),[A,R]=(0,l.useState)(!1),[F,V]=(0,l.useState)(null),[I,O]=(0,l.useState)(!1),[P,U]=(0,l.useState)(1),[E,L]=(0,l.useState)(!1),[B,D]=(0,l.useState)(!1),[G,M]=(0,l.useState)(""),[H,$]=(0,l.useState)(""),[J,K]=(0,l.useState)(!1),{isCoolingDown:Q,remainingTime:W,startCooldown:X}=(0,v.q)({cooldownTime:1e4,key:"smart_quote_scan"}),Y=l.useRef(null),ee=async e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(Y.current&&(Y.current.value=""),Q){alert("Please wait ".concat(W,"s before scanning again."));return}if(s){let e=new FileReader;e.onloadend=()=>T(e.result),e.readAsDataURL(s),R(!0),V(null),O(!1),U(1);try{let e=await (0,f.hv)(s),a=await b.Go.analyzeImage(e);V(a),z&&z(a);let l=(0,w.e_)(a,t),n="Hey! Thanks for sending the inspo. Based on this design, I'd quote this as a ".concat(a.base.length," ").concat(a.base.shape," ").concat(a.base.system," set with ").concat(a.art.level||"no"," art. The estimated total would be around $").concat(l.total.toFixed(2),". Let me know if you'd like to book!");M(n),X()}catch(e){console.error("Analysis failed",e),alert("Analysis failed. Please try again.")}finally{R(!1)}}},et=async()=>{C&&F&&await C(F,H)};return(0,s.jsxs)("div",{className:"space-y-6 max-w-md mx-auto pb-24",children:[(0,s.jsxs)("div",{className:"text-center space-y-2 relative",children:[(0,s.jsxs)("div",{className:"absolute right-0 top-0 flex space-x-2",children:[Z&&(0,s.jsx)(g.default,{href:"/dashboard/settings",className:"text-gray-400 hover:text-pink-500 transition-colors",children:(0,s.jsx)(n.Z,{size:20})}),(0,s.jsx)("button",{onClick:()=>D(!0),className:"text-gray-400 hover:text-pink-500 transition-colors",children:(0,s.jsx)(i.Z,{size:20})})]}),(0,s.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Service Sorter"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Upload inspo, get service recommendations."}),Q&&(0,s.jsxs)("p",{className:"text-xs text-amber-600 font-medium animate-pulse",children:["Cooling down... ",W,"s"]})]}),_?(0,s.jsxs)("div",{className:"relative rounded-3xl overflow-hidden shadow-lg bg-black h-80 group",children:[(0,s.jsx)("div",{className:"w-full h-full overflow-hidden cursor-zoom-in",onClick:()=>{U(e=>1===e?2.5:1)},children:(0,s.jsx)("img",{src:_,alt:"Uploaded",className:"w-full h-full object-contain bg-black transition-all duration-300 ".concat(A?"opacity-50":"opacity-100"),style:{transform:"scale(".concat(P,")"),transformOrigin:"center"}})}),!A&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),L(!0)},className:"absolute top-4 left-4 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 backdrop-blur-sm transition-colors z-10",children:(0,s.jsx)(r.Z,{size:20})}),!A&&(0,s.jsx)("button",{onClick:()=>{T(null),V(null),R(!1),O(!1),U(1)},className:"absolute top-4 right-4 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 backdrop-blur-sm transition-colors z-10",children:(0,s.jsx)(c.Z,{size:20})}),!A&&(0,s.jsxs)("div",{className:"absolute bottom-4 right-4 bg-black/50 text-white px-3 py-1 rounded-full text-xs backdrop-blur-sm pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity flex items-center space-x-1",children:[1===P?(0,s.jsx)(r.Z,{size:12}):(0,s.jsx)(d.Z,{size:12}),(0,s.jsx)("span",{children:1===P?"Tap to Zoom":"Tap to Reset"})]}),(0,s.jsx)(y.Z,{isVisible:A,onCancel:()=>{R(!1)}})]}):(0,s.jsxs)("label",{className:"border-2 border-dashed border-gray-300 h-80 flex flex-col items-center justify-center bg-white cursor-pointer hover:bg-pink-50/50 transition-all group relative overflow-hidden ".concat("pill"===q?"rounded-[2rem]":"square"===q?"rounded-none":"rounded-3xl"),style:{borderColor:A?S:void 0},children:[(0,s.jsx)("input",{ref:Y,type:"file",accept:"image/*",onChange:ee,className:"hidden"}),(0,s.jsx)("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",style:{backgroundColor:"".concat(S,"15")},children:(0,s.jsx)(o.Z,{size:32,style:{color:S}})}),(0,s.jsx)("span",{className:"font-medium text-gray-500 transition-colors",style:{color:S},children:"Tap to Analyze Inspo"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"or upload from gallery"})]}),F&&(0,s.jsxs)("div",{className:"space-y-6 animate-in slide-in-from-bottom-10 fade-in duration-500",children:[F.visual_description&&(0,s.jsxs)("div",{className:"bg-indigo-50 border border-indigo-100 p-4 rounded-xl relative",children:[(0,s.jsx)("h4",{className:"text-xs font-bold text-indigo-800 uppercase tracking-wider mb-2",children:"AI Visual Analysis"}),(0,s.jsxs)("p",{className:"text-sm text-indigo-900 italic mb-3",children:['"',F.visual_description,'"']}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:()=>K(!0),className:"p-1.5 rounded-lg hover:bg-indigo-100 text-indigo-400 hover:text-indigo-600 transition-colors",title:"Good analysis",children:(0,s.jsx)(x.Z,{size:16})}),(0,s.jsx)("button",{onClick:()=>K(!0),className:"p-1.5 rounded-lg hover:bg-indigo-100 text-indigo-400 hover:text-indigo-600 transition-colors",title:"Bad analysis",children:(0,s.jsx)(u.Z,{size:16})})]})]}),(0,s.jsx)(k.Z,{initialSelection:F,onUpdate:e=>V(e)}),Z&&a.length>0&&(0,s.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm",children:[(0,s.jsx)("p",{className:"text-xs text-gray-400 uppercase tracking-wider font-bold mb-2",children:"Link to Client (Optional)"}),(0,s.jsxs)("select",{value:H,onChange:e=>$(e.target.value),className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-100 text-sm font-medium text-charcoal focus:outline-none focus:border-pink-300",children:[(0,s.jsx)("option",{value:"",children:"Select a client..."}),a.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,s.jsx)("p",{className:"text-xs text-gray-400 uppercase tracking-wider font-bold",children:"Draft Reply"}),(0,s.jsx)("span",{className:"text-xs text-pink-500 font-medium",children:"Editable"})]}),(0,s.jsx)("textarea",{value:G,onChange:e=>M(e.target.value),className:"w-full bg-gray-50 p-4 rounded-xl text-gray-700 text-sm leading-relaxed border border-gray-100 focus:outline-none focus:border-pink-300 focus:ring-2 focus:ring-pink-100 transition-all min-h-[100px] resize-none"})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:()=>{G&&(navigator.clipboard.writeText(G),O(!0),setTimeout(()=>O(!1),2e3))},className:"flex-1 py-4 font-medium transition-all shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center space-x-2 ".concat(I?"text-white":"text-white hover:opacity-90"," ").concat("pill"===q?"rounded-full":"square"===q?"rounded-none":"rounded-xl"),style:{backgroundColor:I?"#22c55e":S},children:I?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Z,{size:20}),(0,s.jsx)("span",{children:"Copied!"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Z,{size:20}),(0,s.jsx)("span",{children:"Copy Text"})]})}),Z&&(0,s.jsx)("button",{onClick:et,className:"p-4 font-bold text-gray-500 shadow-lg transition-all flex items-center justify-center bg-white hover:text-pink-500 ".concat("pill"===q?"rounded-full":"square"===q?"rounded-none":"rounded-xl"),children:(0,s.jsx)(p,{size:20})})]})]}),E&&_&&(0,s.jsxs)("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:()=>L(!1),children:[(0,s.jsx)("button",{onClick:()=>L(!1),className:"absolute top-4 right-4 text-white hover:text-gray-300",children:(0,s.jsx)(c.Z,{size:32})}),(0,s.jsx)("img",{src:_,alt:"Full size",className:"max-w-full max-h-full object-contain rounded-lg",onClick:e=>e.stopPropagation()})]}),(0,s.jsx)(j.Z,{isOpen:B,onClose:()=>D(!1),context:"smart_quote"}),(0,s.jsx)(N.Z,{isOpen:J,onClose:()=>K(!1),context:"smart_quote",aiResult:F})]})}}}]);